<template tag-name="lyte-annotator">
	<%if(render){%>
		<lyte-wormhole class = "lyteAnnotatorWormhole" on-before-append = "{{method('beforeappend')}}">
			<template is = "registerYield" yield-name = "lyte-content">
				<div class="lyteAnnotatorOuterWrapper {{ltPropWrapperClass}} {{loading}}">
					<lyte-annotator-wrapper>
						<lyte-annotator-header>
							<%if(ltPropHeaderYield){%>
								<lyte-yield yield-name = "annotator-header"></lyte-yield>
							<%}else{
								ltPropButtons.forEach( function( item ){%>
									<lyte-button lt-prop = "{{stringify(item.properties)}}" class = "lyteAnnotatorButton lyteAnnotator{{item.purpose}}" onclick = "{{action('buttonclick',item.purpose)}}">
										<template is = "registerYield" yield-name = "text">
											{{item.text}}
										</template>
									</lyte-button>
							  <%})
							}%>
						</lyte-annotator-header>
						<lyte-annotator-content onmousedown = "{{action('mousedown',event)}}" ontouchstart = "{{action('mousedown',event)}}" tabindex = 0 onkeydown = "{{action('keydown',event,this)}}">
							<lyte-annotator-whiteboard-content>
								<lyte-whiteboard-area>
									<%if(isImage){%>
										<canvas ref_x = 0 ref_y = 0 class="lyteAnnotatorCanvas"></canvas>
									<%}%>
									<svg xmlns="http://www.w3.org/2000/svg" class = "lyteAnnotatorSvg" viewBox = {{viewBox}}>
									</svg>
									<%if(renderCrop){%>
										<lyte-crop-wrapper>
											<lyte-crop-left></lyte-crop-left>
											<lyte-crop-top></lyte-crop-top>
											<lyte-crop-bottom></lyte-crop-bottom>
											<lyte-crop-right></lyte-crop-right>
											<lyte-crop-content></lyte-crop-content>
										</lyte-crop-wrapper>
									<%} if(loading){%>
										<lyte-annotator-loading class = {{loading}}></lyte-annotator-loading>
									<%}

									if(ltPropSmartGuide){%>
										<div class="lyteAnnotatorSmartGuides lyteConnectHorizontal lyteAnnotatorHidden"></div>
										<div class="lyteAnnotatorSmartGuides lyteConnectVertical lyteAnnotatorHidden"></div>
									<%}%>
								</lyte-whiteboard-area>
							</lyte-annotator-whiteboard-content>
						</lyte-annotator-content>
						<%if( ltPropZoom && isImage ){%>
							<lyte-annotator-footer>
								<div class="lyteAnnotatorZoom">
									<div class="lyteAnnotatorZoomPrev {{disablePrev}}" onclick="{{action('prevZoom')}}">-</div>
									<lyte-dropdown lt-prop-display-value = {{lbind(displayValue)}} lt-prop-selected = "{{lbind(ltPropZoomLevel)}}">
										<template is = "registerYield" yield-name = "yield">
											<lyte-drop-box class = "lyteAnnotatorZoomDropdown">
												<lyte-drop-body>
													<%ltPropZoomOptions.forIn( function( value, key ){%>
														<lyte-drop-item data-value={{key}} class = "lyteAnnotatorZoom_{{key}}">{{value}}</lyte-drop-item>
													<%})%>
												</lyte-drop-body>
											</lyte-drop-box>
										</template>
									</lyte-dropdown>
									<div class="lyteAnnotatorZoomNext {{disableNext}}" onclick="{{action('nextZoom')}}">+</div>
								</div>
							</lyte-annotator-footer>
						<%} if( ltPropContextMenu && renderMenu ){%>
							<lyte-menu lt-prop-show = {{lbind(menuShow)}} lt-prop-event = "contextmenu" lt-prop-query = 'lyte-annotator-wrapper' lt-prop-yield = true lt-prop-wrapper-class = "lyteAnnotatorMenu" on-before-open = "{{method('beforeMenu')}}" on-menu-click = "{{method('menuSelect')}}">
								<template is = "registerYield" yield-name = "yield">
									<lyte-menu-body>
										<%ltPropContextMenuOptions.forIn( function( value, key ){%>
											<lyte-menu-item lt-prop-disabled = {{value.disabled}} class = "lyteAnnotatorMenu_{{key}} {{value.show}}" data-value = {{key}}>{{value.value}}</lyte-menu-item>
										<%})%>
									</lyte-menu-body>
								</template>
							</lyte-menu>
						<%}%>
					</lyte-annotator-wrapper>
					<%if(ltPropSidePanelData){%>
						<lyte-annotator-sidepanel class = "lyteAnnotatorSidePanel_{{ltPropPanelDirection}}" tabindex = 0 onkeydown = "{{action('side_nav',event)}}">
							<lyte-sidepanel-resize-handler ontouchstart = "{{action('move',event)}}" onmousedown = "{{action('move',event)}}">...</lyte-sidepanel-resize-handler>
							<%ltPropSidePanelData.forEach( function( item, index ){%>
								<div class="{{lyteAnnotator(item,item.active,item.direction)}}" onclick="{{action('side_click',item)}}">
									<span class="lyteAnnotatorLabel">{{item.value}}</span>
									<%if(item.children){%>
										<div class="lyteAnnotatorChildWrapper {{item.open}}">
											<%item.children.forEach( function( inner,inn_index ){%>
												<div class="{{lyteAnnotator(inner,inner.active)}}" onclick="{{action('side_click',inner,item)}}">
													<span class="lyteAnnotatorLabel">{{inner.value}}</span>
												</div>
											<%})%>
										</div>
									<%}%>
								</div>
							<%})%>
						</lyte-annotator-sidepanel>
					<%} if( ltPropEditorPanel && renderFilter ){%>
						<lyte-annotator-editorpanel class = {{showFilter}}>
							<lyte-editor-resize-handler ontouchstart = "{{action('move',event)}}" onmousedown = "{{action('move',event)}}">...</lyte-editor-resize-handler>
							<%if( renderFill ){%>
								<lyte-annotator-item pk = true type = "fill" class = 'lyteAnnotatorFill {{showFill}}' lt-prop-item = {{ltPropEditorPanelData.fill}} show = {{lbind(openFillPop)}} onclick="{{action('openPop','Fill')}}" on-apply = '{{method("applyFill")}}'></lyte-annotator-item>
							<%} if( renderStroke ){%>
								<lyte-annotator-item pk = true type = "stroke" class = 'lyteAnnotatorStroke {{showStroke}}' lt-prop-item = {{ltPropEditorPanelData.stroke}} show = {{lbind(openStrokePop)}} onclick="{{action('openPop','Stroke')}}" on-apply = '{{method("applyStroke")}}'></lyte-annotator-item>
							<%} if( renderBorder ){%>
								<lyte-annotator-item pk = true type = "border" class = 'lyteAnnotatorBorder {{showBorder}}' lt-prop-item = {{ltPropEditorPanelData.border}} show = {{lbind(openBorderPop)}} onclick="{{action('openPop','Border')}}" on-apply = '{{method("applyBorder")}}'></lyte-annotator-item>
							<%} if( renderFont ){%>
								<lyte-annotator-item pk = true type = "font" class = 'lyteAnnotatorFont {{showFont}}' lt-prop-item = {{ltPropEditorPanelData.font}} show = {{lbind(openFontPop)}} onclick="{{action('openPop','Font')}}" on-apply = '{{method("applyFont")}}'></lyte-annotator-item>
							<%} if( renderColor ){%>
								<lyte-annotator-item pk = true type = "color" class = 'lyteAnnotatorColor {{showColor}}' lt-prop-item = {{ltPropEditorPanelData.color}} show = {{lbind(openColorPop)}} onclick="{{action('openPop','Color')}}" on-apply = '{{method("applyColor")}}'></lyte-annotator-item>
							<%} if( renderOutline ){%>
								<lyte-annotator-item pk = true type = "outline" class = 'lyteAnnotatorOutlet {{showOutline}}' lt-prop-item = {{ltPropEditorPanelData.outline}} onclick="{{action('toggleOutline',this)}}"></lyte-annotator-item>
							<%} if( renderDashed ){%>
								<lyte-annotator-item pk = true type = "dashed" class = 'lyteAnnotatorDashed {{showDashed}}' lt-prop-item = {{ltPropEditorPanelData.dashed}} show = {{lbind(openDashedPop)}} onclick="{{action('openPop','Dashed')}}" on-apply = '{{method("applyDashed")}}'></lyte-annotator-item>
							<%}%>
						</lyte-annotator-editorpanel>
					<%}%>
				</div>
			</template>
		</lyte-wormhole>
	<%}%>
</template>