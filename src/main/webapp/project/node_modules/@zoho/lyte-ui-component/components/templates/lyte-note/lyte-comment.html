<template tag-name = "lyte-comment" onclick="{{action('comment_click',event)}}" onkeydown="{{action('comment_keydown', event)}}" onmouseenter="{{action('comment_mouseenter',event)}}" onmouseleave="{{action('comment_mouseleave',event)}}" >
		<%if(ltPropPinnedComment){%>
			<span class="lyteNoteUnpinIcon"></span>
			<lyte-yield yield-name = "lyte-pinned-note" value = {{value}}></lyte-yield>
		<%} else{%>
			<lyte-comment-header>
				<%if(ltPropImage){%>
					<span class="lyteCommentProfileImage" data-method = "onProfileClick">
						<img src={{ltPropImage}} onerror="{{action('error')}}" >
					</span>
				<%} else if(ltPropImageText){%>
					<span class="lyteCommentProfileImageText" data-method = "onProfileClick">{{ltPropImageText}}</span>
				<%}ltPropHeader.forEach(function(item,index){%>
					<span class="{{item.name}}" data-method = "onHeaderClick" lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-tooltip-class = "lyteCommentHeaderTooltip" lt-prop-title = {{item.title}}>{{item.value}}</span>
				<%})%>
			</lyte-comment-header>
			<lyte-comment-content class = {{commentType}}>

				<%if(render){%>
					<lyte-note-editor class = "lyteEditorHide" lt-prop-value = {{lbind(ltPropValue)}} lt-prop-edit-mode = {{lbind(ltPropEditMode)}} render = true  lt-prop-buttons = {{ltPropButtons}} on-trigger = "{{method('onTrigger')}}" lt-prop-text-editor = {{ltPropTextEditor}} lt-prop-background = {{ltPropStyle.background}} lt-prop-editor-panel = {{ltPropEditorPanel}} lt-prop-file-upload = {{ltPropFileUpload}} lt-prop-attachments = {{ltPropAttachments}} lt-prop-border = {{ltPropStyle.border}} lt-prop-editor-animation = {{ltPropEditorAnimation}} on-switch = "{{method('modeswitch')}}" animation-height = {{height}} lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-text = {{ltPropText}} lt-prop-voice-note = {{ltPropVoiceNote}} lt-prop-editor-props = {{ltPropEditorProps}} lt-prop-title-yield = {{ltPropTitleYield}} data-index = {{dataIndex}} data-id = {{id}}>
						<template is = "registerYield" yield-name = "lyte-comment-title" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-editor-footer" from-parent></template>
					</lyte-note-editor>
				<%}%>

				<div class="lyteCommentValue">
					<div class="lyteEditorContent" style="{{lyteNoteStyle(ltPropStyle)}}">

						<%if(ltPropVoiceNote){%>
							<a href={{ltPropVoiceNote.src}} class="lyteCommentAttachmentDownload" download={{ltPropVoiceNote.name}} onclick="{{action('download', event)}}"></a>
							<%if(value){%>
								<div class="lyteCommentText" onmouseenter ="{{action('comment_click',event,'data-mouseover')}}" onmouseleave ="{{action('comment_click',event,'data-mouseout')}}">
									{{unescape(value, undefined,sanitizer.attr)}}
								</div>
							<%}%>
							<lyte-voicenote lt-prop-aria="true" lt-prop-tabindex="{{ltPropTabindex}}" id = {{ltPropVoiceNote.id}} lt-prop-src = {{ltPropVoiceNote.src}}></lyte-voicenote>
						<%}else{%>
							<div class="lyteCommentText" onmouseover ="{{action('comment_click',event,'data-mouseover')}}" onmouseout ="{{action('comment_click',event,'data-mouseout')}}">
								{{unescape(value, undefined,sanitizer.attr)}}
							</div>
						<%}%>

						<%if(ltPropCheckIn){%>
							<lyte-yield yield-name = "lyte-note-checkin" lt-prop-check-in = {{ltPropCheckIn}}></lyte-yield>
						<%}%>

						<div class="lyteCommentAttachments">
							<%ltPropAttachments.forEach(function(item,index){%>	
								<div id = {{item.id}} data-index = {{index}} tabindex="{{ltPropTabindex}}" class="lyteCommentAttachmentPreview {{id}}_preview" data-method = "onPreviewClick" data-lytecbox-title = {{item.name}} data-lytecbox-href = {{item.src}} data-lytecbox-type = {{item.ctype}} data-lytecbox-dlink = {{item.src}}>
									<%if(item.fileType == "image" ){%>
										<img class="lytecommentAttachment_image" src={{item.src}}>
									<%} else{ %>
										<div class="lyteCommentNonImageAttachWrap lytecommentAttachment_{{item.fileType}}" style="--lyte-note-attachment-url:url('{{item.src}}')"></div>
									<%}%>
									<span class="lyteCommentAttachmentSize">{{lyteUiFileSize(item.size, "", 1)}}</span>
									<a href={{item.src}} class="lyteCommentAttachmentDownload" download={{item.name}} onclick="{{action('download', event, this)}}"></a>
									<lyte-text class = "lyteCommentAttachmentName" lt-prop-value = {{item.name}}  lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-tooltip-class = "lyteCommentFileNameTooltip"></lyte-text>
								</div>
							<%})%>
						</div>
					</div>	
					<%if(moreOptions){%>
						<span class="lyteNoteCommentMoreOptions" tabindex="{{ltPropTabindex}}" role="button" onfocus="{{action('option_focus', this)}}" onblur="{{action('option_blur', this)}}" onkeydown="{{action('option_keydown', this, event)}}" ></span>
					<%}%>
				</div>
			</lyte-comment-content>
			<lyte-comment-footer>
				<div class="lyteCommentEmojiWrapper">
					<%ltPropEmoji.forEach(function(item,index){%>
						<lyte-emoji-container tabindex="{{ltPropTabindex}}" aria-label="{{item.name}}" role="button" data-index = {{index}} class = "{{lyteUiCommentEmoji(item.class,item.selected,item.count)}}" data-method = "onCommentEmoji" data-value = {{item.value}} data-count = {{item.count}}>
							<lyte-emoji-holder onmouseleave = "{{action('mouseleave')}}" onmouseenter = "{{action('mouseenter',this,index)}}">{{unescape(item.value)}}</lyte-emoji-holder>
							<lyte-emoji-count tabindex="{{ltPropTabindex}}" data-hover = "hovercard_show" onmouseenter = "{{action('comment_click',event,'data-hover')}}" onfocus="{{action('comment_click', event, 'data-hover')}}"  onblur="{{action('hideHoverCard', event)}}">{{item.count}}</lyte-emoji-count>
						</lyte-emoji-container>
					<%})%>
				</div>
				<div class="lyteCommentOtherFooter">
					<%if(ltPropCreatedTime){%>
						<span class="lyteCommentTime" lt-prop-title = {{createdTime.tooltip}} lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-tooltip-class = "lyteCommentFooterTooltip">{{createdTime.display}}</span>
					<%}%>
					<%ltPropFooter.forEach( function( item ){%>
						<span tabindex="{{ltPropTabindex}}" class="{{item.name}}" data-method = "onFooterClick" lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-tooltip-class = "lyteCommentFooterTooltip" lt-prop-title = {{item.title}}>{{item.value}}</span>
					<%})%>
				</div>	

			</lyte-comment-footer>

		<%if(ltPropReply.length){%>
			<lyte-comment-reply>
				<%if(ltPropReplyYield){%>
					<lyte-yield class = "lyteReplyHeader" data-id = {{id}} data-index = {{dataIndex}} yield-name = "lyte-reply-header" lt-prop-reply = {{ltPropReply}}></lyte-yield>
				<%}

				ltPropReply.forEach( function(item,index){%>
					<lyte-comment id = {{item.id}} class = "lyteCommentRply {{item.class}}"  lt-prop-image = {{item.image}} lt-prop-created-time = {{item.createdTime}} lt-prop-header = {{item.header}} lt-prop-edit = {{item.edit}} lt-prop-delete = {{item.delete}} lt-prop-value = {{lbind(item.value)}} data-index = {{concat(index)}} on-time-conversion = "{{method('onTimeConversion')}}" data-index = {{concat(index)}} lt-prop-reply = {{item.reply}} lt-prop-header = {{item.header}} lt-prop-footer = {{item.footer}} lt-prop-emoji = {{item.emoji}} lt-prop-edit-mode = {{lbind(item.editmode)}} lt-prop-buttons = {{ltPropButtons}} on-trigger = "{{method('onTrigger')}}" lt-prop-text-editor = {{ltPropTextEditor}} lt-prop-style = {{item.style}} lt-prop-editor-panel = {{ltPropEditorPanel}} lt-prop-file-upload = {{ltPropFileUpload}} lt-prop-attachments = {{item.attachments}} lt-prop-editor-animation = {{ltPropEditorAnimation}} lt-prop-tooltip-config = {{ltPropTooltipConfig}} lt-prop-text = {{ltPropText}} lt-prop-voice-note = {{item.voiceNote}} lt-prop-check-in = {{item.checkIn}} lt-prop-pin = {{item.pin}} sanitizer = {{sanitizer}} lt-prop-editor-props = {{ltPropEditorProps}} lt-prop-title-yield = {{ltPropTitleYield}} lt-prop-image-text = {{item.imageText}} on-before-comment-download="{{method('beforeDownload')}}">
						<template is = "registerYield" yield-name = "lyte-note-checkin" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-reply-header" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-reply-footer" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-comment-title" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-editor-footer" from-parent></template>
					</lyte-comment>
				<%})

				if(ltPropReplyYield){%>
					<lyte-yield class = "lyteReplyFooter" data-id = {{id}} data-index = {{dataIndex}} yield-name = "lyte-reply-footer" lt-prop-reply = {{ltPropReply}}></lyte-yield>
				<%}%>
			</lyte-comment-reply>
		<%}
	}%>

</template>