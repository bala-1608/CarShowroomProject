<template tag-name="lyte-listview1">
	<%if(!ltPropCustomUtils){%>
		<div class="lyteListUtils">
			<%if(ltPropSearch){%>
				<lyte-input lt-prop = {{ltPropInput}} lt-prop-type="search" lt-prop-value = "{{lbind(ltPropSearchValue)}}"></lyte-input>
			<%}if(ltPropFilters){%>
				<lyte-button onclick="{{action('showFilter')}}" lt-prop-class="lyteListviewFilter">
					<template is = "registerYield" yield-name = "text">
						Show filters
					</template>
				</lyte-button>
			<%}if(ltPropInlineFilter) { %>
				<lyte-listview-filter lt-prop-format="{{ltPropFormat}}" on-condition-change = "{{method('filter')}}" on-inline-filter-apply="{{method('onFilterApply')}}" on-inline-filter-remove="{{method('onFilterRemove')}}" on-filter-close="{{method('onFilterClose')}}" lt-prop-header={{ltPropHeader}} lt-prop-time-format="{{ltPropTimeFormat}}" lt-prop-search-value="{{lbind(ltPropSearchValue)}}" lt-prop-search-content="{{lbind(ltPropSearchContent)}}" lt-prop-filter-content="{{lbind(ltPropFilterContent)}}" on-picklist-construct="{{method('picklistData')}}" lt-prop-grouped-row={{lbind(ltPropGroupedRow)}} lt-prop-filter-grouped="{{lbind(ltPropFilterGrouped)}}" lt-prop-content={{lbind(ltPropContent)}} lt-prop-render-content="{{lbind(ltPropRenderContent)}}" lt-prop-filtered-content={{lbind(ltPropFilteredContent)}} lt-prop-navigator="{{ltPropNavigator}}" lt-prop-multiple-filter="{{ltPropMultipleFilter}}" lt-prop-prev-group-index="{{lbind(ltPropPrevGroupIndex)}}" lt-prop-trigger-event="{{lbind(ltPropTriggerEvent)}}">
				</lyte-listview-filter>
			<%}%>
			<%if(ltPropColumnChooser){%>
				<div class="lyteListColumnChooser {{randomClass}}">
					<lyte-button id="columnChooser" onclick="{{action('showPop')}}">
						<template is="registerYield" yield-name="text">
							Choose column
						</template>
					</lyte-button>
				</div>
			<% } %>
		</div>
	<%} if(ltPropColumnChooser){%>
		<lyte-popover lt-prop = {{ltPropPopover}} lt-prop-wrapper-class="lyteListviewManageColumnPopover" lt-prop-header-padding="" lt-prop-content-padding="" lt-prop-origin-elem = ".{{randomClass}} #columnChooser" lt-prop-show = {{lbind(ltPropColumnChooserShow)}}>
			<template is = "registerYield" yield-name = "popover">
				<lyte-popover-header>{{ltPropText.columnChooser}}</lyte-popover-header>
				<lyte-popover-content>
					<lyte-column-chooser lt-prop-yield = {{ltPropColumnChooserYield}} lt-prop-header = {{ltPropHeader}} lt-prop-sortable = {{ltPropColumnChooserSortable}} on-checked = "{{method('checked')}}" on-unchecked = "{{method('unchecked')}}" on-before-drop = "{{method('columnDrop')}}" on-before-select = "{{method('columnSelect')}}" on-render = "{{method('columnRender')}}">
						<template is = "registerYield" yield-name = "columnChooser" from-parent></template>
					</lyte-column-chooser>
				</lyte-popover-content>
			</template>
		</lyte-popover>
	<%}
	if(ltPropDisplayFilters){%>
		<div class="lyteListFilters" style="{{showConditions}}">
			<%ltPropConditions.forIn( function( value, key ){
				if( value.isValid ){%>
					<div class="lyteListFilterItem">
						<span class="lyteListFilterKey">{{value.filterName || key}}:</span>
						<div class="lyteListFilterValueWrap">
							<span class="lyteListFilterValue">{{value.label}}</span>
							<%if(value.input){%>
								<span class="lyteListFilterSelectedValue">{{value.input}}</span>
							<%}else if( value.type == "multiselect" ){%>
								<div class="lyteListFilterMultiSelect">
									<%value.value.forEach( function( item ){%>
										<span class="lyteListMultipleSelected">{{item}}</span>
									<%})%>
								</div>
							<%}%>
							<span class="lyteListRemoveFilter" onclick="{{action('reset_filter', key)}}"></span>
						</div>
					</div>
				<%}
			})%>
		</div>
	<%}%>
	<%if(ltPropNavigator && !ltPropTable.infiniteScroll && ltPropNavPosition == 'top' ){%>
	<div class="{{if(ltPropNavigator , 'lyteListviewHeader lyteListviewNavigator' ,'lyteListviewHeader')}}">
			<%if(ltPropPerPageArray.length > 0){%>
				<div class="lyteListviewPerPageContainer">
					<template lyte-if = '{{ltPropNavigatorProperties.type == "simple"}}'>
						<p class="lyteListviewPerPageLabel">Showing {{navStartRecord}} - {{navEndRecord}} of {{ltPropRecords}}</p>
					</template>
					<p class="lyteListviewPerPageLabel"> Records per page : </p>
					<lyte-dropdown  lt-prop-selected="{{lbind(ltPropPerPage)}}">
						<template is="registerYield" yield-name="yield">
							<lyte-drop-box>
								<lyte-drop-body>
									<%ltPropPerPageArray.forEach(function(item){%>
										<lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item>
									<%})%>
								</lyte-drop-body>
							</lyte-drop-box>
						</template>
					</lyte-dropdown>
				</div>
			<%}%>
			<lyte-navigator start-record = {{lbind(navStartRecord)}} end-record = {{lbind(navEndRecord)}} on-select = "{{method('navSelect')}}" lt-prop="{{stringify(ltPropNavigatorProperties)}}" on-next = {{method('navigatorNext')}} on-previous = {{method('navigatorPrev')}} on-home = {{method('navigatorHome')}} on-end = {{method('navigatorEnd')}} lt-prop-yield=false lt-prop-value={{ltPropValue}} lt-prop-records={{ltPropRecords}} lt-prop-perpage={{ltPropPerPage}} >
				<template lyte-if = '{{ltPropNavigatorProperties.type == "simple"}}'>
					<lyte-nav-arrow> </lyte-nav-arrow>
					<lyte-nav-arrow> </lyte-nav-arrow>
					<lyte-nav-arrow> </lyte-nav-arrow>
					<lyte-nav-arrow> </lyte-nav-arrow>
				</template>
			</lyte-navigator>
	</div>
	<%}%>

	<div class="{{if(ltPropSubHeaders ,  'lyteListviewSubHeaderPresent lyteListviewWrapper' , 'lyteListviewWrapper')}}">
		<lyte-table lt-prop = "{{stringify(ltPropTable)}}" lt-prop-yield = true lt-prop-content = {{ltPropRenderContent}} lt-prop-header = {{headerData}} lt-prop-from-listview="true" lt-prop-data = {{lbind(ltPropData)}} lt-prop-width = {{overallWidth}} on-fix = "{{method('fix')}}" on-un-fix = "{{method('unfix')}}" onscroll="{{action('scroll')}}" scroll-end = "{{method('scrollEnd')}}" onclick="{{action('yield_click',event)}}" on-fake-column-create = "{{method('fakeCreate')}}" on-before-select = "{{method('beforeselect')}}" on-select = "{{method('onselect')}}" on-before-drop = "{{method('beforeDrop')}}" from-list-view = true>
			<template is = "registerYield" yield-name = "yield">
				<%if(ltPropSubHeaders){%>
					<div class="lyteListFakeHeader" style="width:{{overallWidth}}">
						<%fakeHeaderData.forEach( function( item, index ){%>
							<div class="lyteListFakeCell {{if(item.data.pin,'lyteListFixed','')}}" parent_index = {{index}} style = "{{listStyle(item, item.width)}}">
								<%if( item.data.name ){
									if(ltPropFakeHeaderYield){%>
										<lyte-yield yield-name = "fakeHeaderYield" cell-data = {{item.data}}></lyte-yield>
									<%}else{%>
										<span>{{item.data.name}}</span>
									<%}
								}
								if(item.resizable){%>
									<div class="lyteListResizeHandler" onmousedown="{{action('resize',event)}}" ontouchstart="{{action('resize',event)}}"></div>
								<%}%>
							</div>
						<%})%>
					</div>
				<%}if(ltPropEdit){%>
					<lyte-edit-element class="lyteListEditElement {{isActive}}" style="{{editStyle}}" tabindex="1" onkeydown="{{action('keydown',event,this)}}" ondblclick="{{action('dblclick')}}" lt-prop-edit-mode = {{lbind(ltPropEditMode)}} lt-prop-edit-yield = {{ltPropEditYield}} lt-prop-cell-data = {{cellData}} lt-prop-row-data = {{rowData}} on-picklist-construct = "{{method('picklistData')}}" on-blur = "{{method('editBlur')}}" lt-prop-format = {{ltPropFormat}} lt-prop-time-format={{ltPropTimeFormat}} lt-prop-cell-index = {{selectedCell}} lt-prop-row-index = {{originalRow}} onclick = "{{action('edit_elem_click',event)}}">
						<template is = "registerYield" yield-name = "edit" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-custom-edit-yield" from-parent></template>
					</lyte-edit-element>
				<%}%>
				<lyte-table-structure>
					<lyte-thead>
						<lyte-tr >
							<%headerData.forEach( function( cell, index ){%>
								<lyte-th tabindex="{{ltPropTabindex}}" index = {{index}} class = {{cell.data.class}} parent_index = {{cell.parentIndex}} fixed = {{cell.data.pin}} sticky-position = {{cell.data.position}}  style = "{{listStyle(cell.data, cell.data.width)}}">
									<span class="lyteListHeaderName {{cell.data.sortStatus}}" onclick="{{action('sort',index, undefined, event)}}">
										<%if(ltPropHeaderYield){%>
											<lyte-yield yield-name = "headerYield" cell-data = {{cell.data}} cell-index = {{index}}></lyte-yield>
										<%} else {%>
											<span class="lyteListViewHeaderLabel">{{cell.data.name}}</span>
										<%}%>
									</span>
									<%if(cell.sortStatus){%>
										<span class="lyteListSortReset" onclick="{{action('reset_sort',cell)}}"></span>
									<%}
									if( cell.data.resizable ){%>
										<div class="lyteListResizeHandler" onmousedown="{{action('resize',event)}}" ontouchstart="{{action('resize',event)}}"></div>
									<%}%>
								</lyte-th>
							<%})%>
						</lyte-tr>
					</lyte-thead>
					<%if(!ltPropGroupedRow && !ltPropFilterGrouped){%>
						<lyte-tbody onmousedown = "{{action('mousedown',event)}}" ontouchstart = "{{action('touchstart',event)}}" id="lyteTableBody" body-index= "0" >
							<%if(ltPropTable.infiniteScroll){%>
								<%ltPropData.forEach( function( item, index ){%>
									<lyte-tr index = {{item.index}} actual_index = {{item.body.rowIndex}} class = "{{item.body.data.class}}" id = {{item.body.id}} onclick = "{{action('row_click', item, this, event)}}">
										<%headerData.forEach( function( cell, cellIndex ){%>
											<lyte-td tabindex="{{ltPropTabindex}}" class = {{cell.data.class}} row-index = {{item.index}} index = {{cellIndex}}>
												<%if(cell.data.multiYield){%>
													<div class="lyteListViewMultiYield">
														<%cell.data.multiYield.forEach( function( yieldItem ){%>

														<%})%>
													</div>
												<%}else{%>
												<lyte-yield yield-name = '{{cell.data.yield||"yield"}}' row-data = {{item.body.data}} cell-data = {{cell.data}} actual-index = {{item.index}} cell-index = {{cellIndex}} row-index = {{index}}></lyte-yield>
												<%}%>
											</lyte-td>
										<%})%>
									</lyte-tr>
								<%})%>
							<%}else {%>
								<%ltPropRenderContent.forEach( function( item,index ) {%>
									<lyte-tr index = {{index}} actual_index = {{index}} class = "" id = {{item.body.id}} onclick = "{{action('row_click', item, this, event)}}">
										<%headerData.forEach( function( cell, cellIndex ){%>
											<td tabindex="{{ltPropTabindex}}" class="{{cell.data.class}}" colspan="{{item.data.colspan[cell.data.prop]}}" rowspan="{{item.data.rowspan[cell.data.prop]}}" style={{item.data.style[cell.data.prop]}} row-index = {{index}} index = {{cellIndex}}>
												<lyte-yield yield-name = '{{cell.data.yield||"yield"}}' row-data = {{item.data}} cell-data = {{cell.data}} actual-index = {{index}} cell-index = {{cellIndex}} row-index = {{index}}>
												</lyte-yield>
											</td>
										<%})%>
									</lyte-tr>

									<%if(item.data.expand_data){%>
										<lyte-tr  expanded-row>
											<template lyte-if="true">
												<th colspan="{{getObjectLenght(item.data)}}">
													<lyte-yield yield-name="expanded-row" data="{{item.data.expand_data}}"></lyte-yield>
												</th>
											</template>
										</lyte-tr>
									<%}%>
								<%})%>
							<%}%>
						</lyte-tbody>
					<%}else{%>
						<%ltPropRenderContent.forEach( function( groupItem , bodyIndex){%>
							<lyte-tbody onmousedown = "{{action('mousedown',event)}}" ontouchstart = "{{action('touchstart',event)}}" id="{{'lyteTableBody'+bodyIndex}}" class="{{if(ltPropGroupInitiallyClosed,'lyteListViewRowHidden sortableTableBody','sortableTableBody')}}" body-index={{bodyIndex}}>
								<lyte-tr class="lyteGroupHeading">
									<template lyte-if="true">
										<td tabindex="{{ltPropTabindex}}" class="sortable-ignore lyteGroupHeadingData" onclick="{{action('bodyHeadClick',this)}}"> 
											<span class="lyteListViewTableAccordionIcon" ></span>
											<%if(ltPropGroupHeaderYield){%>
												<lyte-yield yield-name="row-heading" cell-data="{{groupItem}}" cell-index="{{bodyIndex}}"></lyte-yield>
											<%}else{%>
												<span>{{groupItem.name}}</span>
											<%}%>
										</td>
										<td class="sortable-ignore lyteListViewIgnore" colspan="{{ltPropHeader.length}}" onclick="{{action('bodyHeadClick',this)}}"></td>
									</template>
								</lyte-tr>
								
								<%groupItem.rows.forEach( function( item, index ){%>
									<lyte-tr style="{{if(ltPropGroupInitiallyClosed , 'display:none;')}}" index = {{index}} actual_index = {{index}} class = "lyteListViewTableContent" id = {{item.body.id}} onclick = "{{action('row_click', item, this, event)}}">
										<%headerData.forEach( function( cell, cellIndex ){%>
											<td tabindex="{{ltPropTabindex}}" class="{{cell.data.class}}" colspan="{{item.data.colspan[cell.data.prop]}}" rowspan="{{item.data.rowspan[cell.data.prop]}}" style={{item.data.style[cell.data.prop]}} row-index = {{index}} index = {{cellIndex}}>
												<lyte-yield yield-name = '{{cell.data.yield||"yield"}}' row-data = {{item.data}} cell-data = {{cell.data}} actual-index = {{index}} cell-index = {{cellIndex}} row-index = {{index}}></lyte-yield>
											</td>
										<%})%>
									</lyte-tr>

									<%if(item.data.expand_data){%>
										<lyte-tr expanded-row>
											<template lyte-if="true">
												<th colspan="{{getObjectLenght(item.data)}}">
													<lyte-yield yield-name="expanded-row" data="{{item.data.expand_data}}"></lyte-yield>
												</th>
											</template>
										</lyte-tr>
									<%}%>
								<%})%>
							</lyte-tbody>
						<%})%>
					<%}%>
				</lyte-table-structure>
			</template>
		</lyte-table>
	</div>
	<%if(ltPropNavigator && !ltPropTable.infiniteScroll && ltPropNavPosition == 'bottom' ){%>
	<div class="{{if(ltPropNavigator , 'lyteListviewFooter lyteListviewNavigator' ,'lyteListviewFooter')}}">
			<%if(ltPropPerPageArray.length > 0){%>
				<div class="lyteListviewPerPageContainer">
					<template lyte-if = '{{ltPropNavigatorProperties.type == "simple"}}'>
						<p class="lyteListviewPerPageLabel">Showing {{navStartRecord}} - {{navEndRecord}} of {{ltPropRecords}}</p>
					</template>
					<p class="lyteListviewPerPageLabel"> Records per page : </p>
					<lyte-dropdown  lt-prop-selected="{{lbind(ltPropPerPage)}}">
						<template is="registerYield" yield-name="yield">
							<lyte-drop-box>
								<lyte-drop-body>
									<%ltPropPerPageArray.forEach(function(item){%>
										<lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item>
									<%})%>
								</lyte-drop-body>
							</lyte-drop-box>
						</template>
					</lyte-dropdown>
				</div>
			<%}%>
			<lyte-navigator start-record = {{lbind(navStartRecord)}} end-record = {{lbind(navEndRecord)}} on-select = "{{method('navSelect')}}" lt-prop="{{stringify(ltPropNavigatorProperties)}}" on-next = {{method('navigatorNext')}} on-previous = {{method('navigatorPrev')}} on-home = {{method('navigatorHome')}} on-end = {{method('navigatorEnd')}} lt-prop-yield=false lt-prop-value={{ltPropValue}} lt-prop-records={{ltPropRecords}} lt-prop-perpage={{ltPropPerPage}} >
				<template lyte-if="{{ltPropNavigatorProperties.yield == true}}">
					<template is="registerYield" yield-name="navigatorYield" from-parent></template>
				</template>
				<template lyte-if = '{{ltPropNavigatorProperties.type == "simple"}}'>
					<lyte-nav-arrow> </lyte-nav-arrow>
					<lyte-nav-arrow> </lyte-nav-arrow>
					<lyte-nav-arrow> </lyte-nav-arrow>
					<lyte-nav-arrow> </lyte-nav-arrow>
				</template>
			</lyte-navigator>
	</div>
	<%}%>

	<%if(ltPropFilters && renderFilter){%>
		<lyte-list-filter lt-prop = {{ltPropFilter}} lt-prop-format = {{ltPropFormat}} lt-prop-conditions = {{lbind(ltPropConditions)}} lt-prop-any = {{lbind(ltPropAny)}} lt-prop-show = {{lbind(ltPropShowFilters)}} lt-prop-fields = {{headerData}} lt-prop-content = {{ltPropContent}} lt-prop-filtered-content="{{lbind(ltPropFilteredContent)}}" lt-prop-render-content="{{lbind(ltPropRenderContent)}}" lt-prop-modal-properties="{{ltPropModalProperties}}" lt-prop-filter-element-properties="{{ltPropFilterElementProperties}}" on-condition-change = "{{method('filter')}}" on-picklist-construct = "{{method('picklistData')}}" lt-prop-hidden-rows="{{hiddenRows}}" fetch-more-data = "{{method('fetchData')}}" on-custom-filter-reset = "{{method('customReset')}}" on-before-filter-open = "{{method('beforeOpen')}}" on-before-filter-close = "{{method('beforeClose')}}" on-modal-filter-apply="{{method('onModalApply')}}" on-modal-filter-remove="{{method('onModalFilterRemove')}}" on-reset="{{method('onBeforeReset')}}" on-apply="{{method('onBeforeApply')}}" on-cancel="{{method('onBeforeCancel')}}">
			<template is = "registerYield" yield-name = "lyte-custom-filter" from-parent></template>
		</lyte-list-filter>
	<%}%>
</template>
