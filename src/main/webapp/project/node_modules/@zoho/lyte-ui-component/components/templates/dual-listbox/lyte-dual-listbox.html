<template tag-name="lyte-dual-listbox" role="listbox">
  <div class="lyteListboxWrapper">
    <div class="lyteListboxLeftPanel lyteListboxPanels" id="lyte_listbox_left_panel" aria-label="left panel" aria-multiselectable=true aria-orientation="vertical" onfocus="{{action('focusPanel' , this)}}" onfocusout="{{action('blurPanel' , this)}}" aria-activedescendant="{{listboxLeftAriaDescendant}}">
      <lyte-search class="lyteListBoxSearch" lyte-if="{{ltPropShowSearch}}" lt-prop="{{stringify(ltPropSearch)}}" lt-prop-class="lyteListboxInput" lt-prop-close-icon=true lt-prop-query-selector='{"scope" : ".{{ltPropSearchScope}}", "search" : ".lyteListBoxLeftWrap", "target" : ".lyteListBoxLeftWrap"}' lt-prop-check-from-parent=true lt-prop-component="duallistbox" lt-prop-trim=true on-search="{{method('onSearch')}}"></lyte-search>
      <div class="lyteListboxleftElementWrap lyteListboxSortablePanels">
        <% ltPropLeftData.forEach(function(item, index){%>
        <div class="lyteListBoxLeftWrap {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'par','left')}}">
          <div class="lyteListBoxLeftElement lyteLeftLvl1 {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'child','left')}}" ondblclick="{{action('moveElementRight' , this , 'doubleClick')}}" onmouseup="{{action('elementFN' , this, event)}}" onmousedown="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(index)}}"
            dom-index="" id="" role="option" aria-selected=false>
            <% if(ltPropYield) { %>
              <lyte-yield class="lyteListboxYield" yield-name="leftWidget" left-widget-value={{item}}></lyte-yield>
            <% } else { %>
              <div class="lyteListboxDisplayNode">
                {{item[ltPropDisplayKey]}}
              </div>
            <% } %>
            <lyte-lb-add class="lyteLbAdd" lyte-if="{{ltPropShowIcon}}" onclick="{{action('addElementToRight' , this)}}"></lyte-lb-add>
          </div>
        </div>
        <% }) %>
        <div class="lyteListBoxNoResultsFound" lyte-if="{{noResultsFound}}">{{ltPropNoResultMessage}}</div>
      </div>
    </div>
    <div class="lyteListboxToolbar" lyte-if="{{ltPropShowToolbar}}">
      <div class="lyteLBToolbarItems lyteLBTNavBtn lyteLBTBMoveRight" tabindex=0 role="button" aria-label="move selected elements right" lyte-if={{moveRight}} onclick="{{action('moveElementRight' , this , 'toolbarClick')}}" lt-prop-title="Move Right" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTNavBtn lyteLBTBMoveLeft" tabindex=0 role="button" aria-label="move selected elements left" lyte-if={{moveLeft}} onclick="{{action('moveElementLeft' , this , 'toolbarClick')}}" lt-prop-title="Move Left" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTNavBtn lyteLBTBMoveUp" tabindex=0 role="button" aria-label="move selected elements up" lyte-if={{moveTop}} onclick="{{action('moveElementUp',this)}}" lt-prop-title="Move Up" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTNavBtn lyteLBTBMoveDown" tabindex=0 role="button" aria-label="move selected elements down" lyte-if={{moveBottom}} onclick="{{action('moveElementDown',this)}}" lt-prop-title="Move Down" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
      <div class="lyteLBToolbarItems lyteLBTBMoveAllRight" tabindex=0 role="button" aria-label="move all elements right" lyte-if={{moveAllRight}} onclick="{{action('moveAllElementsRight',this)}}" lt-prop-title="Move All Right" lt-prop-tooltip-config='{ "position":"bottom"}'> ar </div>
      <div class="lyteLBToolbarItems lyteLBTBMoveAllLeft" tabindex=0 role="button" aria-label="move all elements left" lyte-if={{moveAllLeft}} onclick="{{action('moveAllElementsLeft',this)}}" lt-prop-title="Move All Left" lt-prop-tooltip-config='{ "position":"bottom"}'> al </div>
      <div class="lyteLBToolbarItems lyteLBTBDeleteMarked" tabindex=0 role="button" aria-label="delete the selected element" lyte-if={{deleteElement}} onclick="{{action('deleteElement')}}" lt-prop-title="Delete" lt-prop-tooltip-config='{ "position":"bottom"}'></div>
    </div>
    <% if(!ltPropHasPinOption && !ltPropInfiniteScroll){ %>

    <div class="lyteListboxRightPanel lyteListboxUnpinnedWrapper lyteListboxPanels lyteListboxSortablePanels" tabindex=0 id="lyte_listbox_right_panel" aria-label="right panel" aria-orientation="vertical" onfocus="{{action('focusPanel' , this)}}" onfocusout="{{action('blurPanel' , this)}}" aria-activedescendant="{{listboxRightAriaDescendant}}">
      <% ltPropRightData.forEach(function(item, index){%>
      <div class="lyteListBoxRightWrap {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'par','right',ltPropAllowMandateSortable)}}">
        <div class="lyteListBoxRightElement lyteRightLvl1 {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'child','right',ltPropAllowMandateSortable)}}" ondblclick="{{action('moveElementLeft' , this , 'doubleClick')}}" onmouseup="{{action('elementFN' , this, event)}}" onmousedown="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(index)}}"
          setParent="{{lyteListBoxParentIndex(this , item , ltPropAssociateParent)}}" dom-index="" id="" role="option" aria-selected=false>
          <% if(ltPropYield) { %>
            <lyte-yield class="lyteListboxYield" yield-name="rightWidget" right-widget-value={{item}}></lyte-yield>
          <% } else { %>
            <div class="lyteListboxDisplayNode">
              {{item[ltPropDisplayKey]}}
            </div>
          <% } %>
          <lyte-lb-remove class="lyteLbAdd" lyte-if={{!item[ltPropMandateKey]}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
          <lyte-lb-remove class="lyteLbAdd" lyte-if={{item[ltPropMandateKey]&&showRemoveBtn}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
        </div>
      </div>
      <% }) %>
      <div class="lyteListBoxNoResultsFound" lyte-if="{{noResultsFoundRight}}">{{ltPropNoResultMessage}}</div>
    </div>

    <% } else if(enableInfiniteScroll) { %>

      <div class="lyteListboxRightPanel lyteListboxUnpinnedWrapper lyteListboxPanels lyteListboxSortablePanels" tabindex=0 id="lyte_listbox_right_panel" aria-label="right panel" aria-orientation="vertical" onfocus="{{action('focusPanel' , this)}}" onfocusout="{{action('blurPanel' , this)}}" aria-activedescendant="{{listboxRightAriaDescendant}}">
        <% infiniteScrollPopulateData.forIn(function(value, index){%>
        <div class="lyteListBoxRightWrap {{lyteListBoxRequiredClassHelper(value.data,ltPropMandateKey,minCountReached,'par','right',ltPropAllowMandateSortable)}}">
          <div 
          class="lyteListBoxRightElement lyteRightLvl1 {{lyteListBoxRequiredClassHelper(value.data,ltPropMandateKey,minCountReached,'child','right',ltPropAllowMandateSortable)}}" 
          ondblclick="{{action('moveElementLeft' , this , 'doubleClick')}}" 
          onmouseup="{{action('elementFN' , this, event)}}" 
          onmousedown="{{action('elementFN' , this, event)}}" 
          index="{{value.index}}" setParent="{{lyteListBoxParentIndex(this , value.data , ltPropAssociateParent)}}" dom-index="" id="" role="option" aria-selected=false>
            <% if(ltPropYield) { %>
              <lyte-yield class="lyteListboxYield" yield-name="rightWidget" right-widget-value={{value.data}}></lyte-yield>
            <% } else { %>
              <div class="lyteListboxDisplayNode">
                {{value.data[ltPropDisplayKey]}}
              </div>
            <% } %>
            <lyte-lb-remove class="lyteLbAdd" lyte-if={{!value.data[ltPropMandateKey]}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
            <lyte-lb-remove class="lyteLbAdd" lyte-if={{value.data[ltPropMandateKey]&&showRemoveBtn}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
          </div>
        </div>
        <% }) %>
        <div class="lyteListBoxNoResultsFound" lyte-if="{{noResultsFoundRight}}">{{ltPropNoResultMessage}}</div>
      </div>

    <% } else { %> 

      <div class="lyteListboxRightPanel lyteListboxPanels" tabindex=0 id="lyte_listbox_right_panel" aria-label="right panel" aria-orientation="vertical" onfocus="{{action('focusPanel' , this)}}" onfocusout="{{action('blurPanel' , this)}}" aria-activedescendant="{{listboxRightAriaDescendant}}">
        <div class="lyteListboxPinnedWrapper lyteListboxSortablePanels">
          <% ltPropPinnedData.forEach(function(item, index){%>
            <div class="lyteListBoxRightWrap lyteListBoxRightPinnedWrap {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'par','right',ltPropAllowMandateSortable)}}">
              <div class="lyteListBoxRightElement lyteRightLvl1 {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'child','right',ltPropAllowMandateSortable)}}" onmouseup="{{action('elementFN' , this, event)}}" onmousedown="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(index)}}"
                setParent="{{lyteListBoxParentIndex(this , item , ltPropAssociateParent)}}" dom-index="" id="" role="option" aria-selected=false>
                <% if(ltPropYield) { %>
                  <lyte-yield class="lyteListboxYield" yield-name="rightWidget" right-widget-value={{item}}></lyte-yield>
                <% } else { %>
                  <div class="lyteListboxDisplayNode">
                    {{item[ltPropDisplayKey]}}
                  </div>
                <% } %>
              </div>
            </div>
            <% }) %>
        </div>
        <div class="lyteListboxUnpinnedWrapper lyteListboxSortablePanels">
          <% ltPropRightData.forEach(function(item, index){%>
            <div class="lyteListBoxRightWrap {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'par','right',ltPropAllowMandateSortable)}}">
              <div class="lyteListBoxRightElement lyteRightLvl1 {{lyteListBoxRequiredClassHelper(item,ltPropMandateKey,minCountReached,'child','right',ltPropAllowMandateSortable)}}" ondblclick="{{action('moveElementLeft' , this , 'doubleClick')}}" onmouseup="{{action('elementFN' , this, event)}}" onmousedown="{{action('elementFN' , this, event)}}" index="{{lyteListBoxIndex(index)}}"
                setParent="{{lyteListBoxParentIndex(this , item , ltPropAssociateParent)}}" dom-index="" id="" role="option" aria-selected=false>
                <% if(ltPropYield) { %>
                  <lyte-yield class="lyteListboxYield" yield-name="rightWidget" right-widget-value={{item}}></lyte-yield>
                <% } else { %>
                  <div class="lyteListboxDisplayNode">
                    {{item[ltPropDisplayKey]}}
                  </div>
                <% } %>
                <lyte-lb-remove class="lyteLbAdd" lyte-if={{(!item[ltPropMandateKey])&&ltPropShowIcon}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
                <lyte-lb-remove class="lyteLbAdd" lyte-if={{(item[ltPropMandateKey]&&showRemoveBtn)&&ltPropShowIcon}} onclick="{{action('removeElementFromRight' , this)}}"></lyte-lb-remove>
              </div>
            </div>
            <% }) %>
        </div>
        <div class="lyteListBoxNoResultsFound" lyte-if="{{noResultsFoundRight}}">{{ltPropNoResultMessage}}</div>
      </div>
      
    <% } %>

    <lyte-badge class="lyteListboxBadge" lyte-if={{moreLBElements}} lt-prop-position='topRight' lt-prop-max-length=3></lyte-badge>
    <!-- <div class="lyteListboxAriaLive" lyte-if="{{ariaLiveContentBoolean}}" aria-live="polite">{{ariaLiveContent}}</div> -->
  </div>
</template>
