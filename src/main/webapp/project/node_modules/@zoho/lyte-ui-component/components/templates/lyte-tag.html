<template tag-name="lyte-tag">
	<lyte-dropdown 
	on-before-show={{method('preventOpen')}} 
	on-before-add={{method('validate')}} 
	on-add={{method('onItemSelected')}} 
	on-remove={{method('onItemRemoved')}} 
	on-before-remove={{method('storeRemovedItem')}}
	on-change="{{method('fireOnChange')}}"
	lt-prop-type="multisearch" 
	lt-prop-no-result={{ltPropNoResult}}
	lt-prop-options={{standardizedOptions}} 
	lt-prop-user-value={{ltPropUserValue}} 
	lt-prop-system-value={{ltPropSystemValue}} 
	lt-prop-selected-list={{standardizedList}}
	lt-prop-disabled={{ltPropDisabled}}
	lt-prop={{stringify(ltPropDropdown)}}>
		<template is="registerYield" yield-name="yield">
			<lyte-drop-button>
				<div class="lyteMultiSelect">
					<ul class="lyteMultipleSelect">
						<% if( ltPropButtonYield ) { %>
							<lyte-yield yield-name="button" lyte-options-selected={{standardizedList}}></lyte-yield>
						<% } else { %>
							<% standardizedList.forEach( function( item, index ) { %>
								<li data-value={{item[ltPropSystemValue]}}>
									<span class="lyteTagItem">{{item[ltPropUserValue]}}</span>
									<lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove>
								</li>
							<% } )%>
						<% } %>
						<li class="lyteTagInputLi">
							<input onclick="{{action('fireOnClick',event)}}" placeholder={{ltPropPlaceholder}} class="lyteDropdownTextField" type="text" oninput={{action('searchItemsOnInput',event)}} onblur={{action('searchItemsOnBlur',event)}} onkeydown={{action('handleOtherKeys',event)}} disabled={{ltPropDisabled}} />
						</li>
					</ul>
				</div>
			</lyte-drop-button>
			<% if(ltPropBoxYield) { %>
				<lyte-yield yield-name="box" lyte-options={{lyteOptions}}></lyte-yield>
			<% } else { %>
				<lyte-drop-box>
					<lyte-drop-body>
						<% lyteOptions.forEach( function( item, index ) { %>
							<% if( lyteUiOptGroupCheck( item ) ) { %>
								<lyte-drop-group>
									<lyte-drop-label>{{ lyteUiReturnOnlyKey( item ) }}</lyte-drop-label>
									<% lyteUiReturnValueBy( item, lyteUiReturnOnlyKey( item ) ).forEach(function( subitem, indexval ) { %>
										<lyte-drop-item data-value={{subitem[ltPropSystemValue]}}>
											<lyte-tag-label>
												{{ subitem[ ltPropUserValue ] }}
											</lyte-tag-label>
											<% if( subitem[ ltPropDescriptionValue ] ) { %>
												<lyte-tag-description>
													{{ subitem[ ltPropDescriptionValue ] }}
												</lyte-tag-description>
											<% } %>
										</lyte-drop-item>
									<% }) %>
								</lyte-drop-group>
							<% }
							else { %>
								<lyte-drop-item data-value={{item[ltPropSystemValue]}}>
									<lyte-tag-label>
										{{ item[ ltPropUserValue ] }}
									</lyte-tag-label>
									<% if( item[ ltPropDescriptionValue ] ) { %>
										<lyte-tag-description>
											{{ item[ ltPropDescriptionValue ] }}
										</lyte-tag-description>
									<% } %>
								</lyte-drop-item>
							<% } %>
							
						<% } )%>
					</lyte-drop-body>
				</lyte-drop-box>
			<% } %>
		</template>
	</lyte-dropdown>
</template>