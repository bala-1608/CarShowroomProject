<template tag-name="lyte-timeline-view">
    <div class="lyteTimelineViewTable {{if(enableGroup, 'lyteTimelineViewWithGrouping')}}">
        <div class="lyteTimelineViewContentElem {{lyteUiTimelineViewGetViewClass(ltPropView)}}  {{lyteUiTimelineViewHasScroll(ltPropManipulatedEvent,ltPropMaxHeight)}}" style="--lyte-timelineview-row-end: {{lyteUiTimelineViewRowCount(ltPropManipulatedEvent,ltPropMaxHeight)}}; --lyte-timelineview-column-size: {{ltPropDateWidth[ltPropView]+'px'}}; --lyte-timelineview-column-gridline-temp: {{(ltPropDateWidth[ltPropView]+1) + 'px'}};" lyte-if="{{!enableGroup}}">
            <div class="lyteTimelineViewHeaderRowWrap">
                <div class="lyteTimelineViewHoverCardDiv lyteTimelineViewHoverCardHide">
                    <div class="lyteTimelineViewHoverCard">
                        <lyte-yield yield-name="hover-card" timeline-event="{{item}}" hover-data="{{ltPropHoverCardData}}">
                        </lyte-yield>  
                    </div>
                </div>
                <div class="lyteTimelineViewHeaderRow">
                    <div lyte-for="{{headerArray}} as item index" class="lyteTimelineViewPrimaryHeaderElem lyteTimelineViewHeaderMonthElem" style='--lyte-timelineview-col-number: {{item.startColumn}}; grid-column-end: span {{item.endColumn}}; ' onmouseenter="{{action('onDateHover',event,this,item)}}" onmouseleave="{{action('onDateMouseOut')}}">
                        <span class="lyteTimelineViewPeriodLabel">
                            <%if(ltPropView == 'week'){%>
                                {{item.week}}
                            <%}else if(ltPropView == 'quarter') {%>
                                <span class="lyteTimelineViewHeaderPrimaryLabel">{{item.quarter}}</span>
                                <span class="lyteTimelineViewYearLabel">{{item.year}}</span>
                            <%}else{%>
                                <span class="lyteTimelineViewHeaderPrimaryLabel lyteTimelineViewMonthLabel">{{lyteUiTimelineViewGetMonth(item.month,months)}}</span>
                                <span class="lyteTimelineViewYearLabel">{{item.year}}</span>
                            <%}%>
                        </span>
                    </div>
                </div>
                <div class="lyteTimelineViewHeaderRow">
                    <div lyte-for="{{timeline}} as item index" class="lyteTimelineViewSecondaryHeaderElem lyteTimelineViewHeaderElem {{lyteUiTimelineViewFindWeekend(item,ltPropView,ltPropNonWorkingDays,ltPropHolidayObject)}} {{if(item.isendOfView,'lyteTimelineViewEndOfSection','')}}" style="--lyte-timelineview-col-number: {{index+1}}; --lyte-timelineview-lineCount:{{lyteUiTimelineViewLineCount(item,null,this,ltPropView)}};" data-date="{{lyteUiSchedulerGetDate(item)}}" id="{{lyteUiSchedulerGetDate(item)}}" onmouseenter="{{action('onDateHover',event,this)}}" onmouseleave="{{action('onDateMouseOut')}}">
                        <div>
                            <% if(ltPropView == 'quarter') {%>
                                {{lyteUiTimelineViewGetMonth(item,months)}}
                            <%}else{%>
                                {{lyteUiTimelineViewGetDay(item,ltPropView)}}
                            <%}%>
                        </div>
                    </div>
                </div>
            </div>
            <%if(ltPropManipulatedEvent.length){%>
                <div class="lyteTimelineViewEventsContainer">
                    <div lyte-for-in="{{populateObject}} as item index"   class="lyteTimelineViewEventDiv {{lyteUiTimelineViewCss(item,this,timeline,ltPropView)}} {{if(!item.end,'lyteTimeLineViewNoEnd','')}}" id="{{item.id}}"  onmouseover="{{action('onEventHover',event,item,this)}}" onmouseleave="{{action('onEventOut',event,item,this)}}" onfocusin="{{action('onEventHover',event,item,this)}}" >
                        <div class="lyteTimelineViewEvent {{lyteUiTimelineViewAddClass(item.class,this)}}" style=" {{lyteUiTimelineViewColorCode(item.color_code,this)}}">  
                            <div class="lyteTimelineViewLeft lyteTimelineViewEventResizeHandler" onmousedown="{{action('onmousedownEvent',event,'left',this,item)}}" onkeydown="{{action('onkeydownEvent',event,'left',this,item)}}" onkeyup="{{action('onkeyupEvent',event,this,item)}}" lyte-if={{item.leftResize&&item.end}}></div>
                            <lyte-yield yield-name="timeline-event" timeline-event="{{item}}" >
                            </lyte-yield>  
                            <div  class='lyteTimeLineViewNoEndElem' lyte-if="{{!item.end}}"></div>
                            <div class="lyteTimelineViewDue" lyte-if="{{item.dueDate}}">
                            </div>
                            <div class="lyteTimelineViewRight lyteTimelineViewEventResizeHandler" onmousedown="{{action('onmousedownEvent',event,'right',this,item)}}"  onkeydown="{{action('onkeydownEvent',event,'right',this,item)}}"  onkeyup="{{action('onkeyupEvent',event,this,item)}}" lyte-if={{item.rightResize&&item.end}}></div>
                        </div>
                    </div> 
                </div>
                <div class="lyteTimelineViewOverlayDiv">
                    <%if(ltPropView == 'day'){%>
                        <div lyte-for="{{timeline}} as item index" lyte-if="{{lyteUiTimelineGridOverlay(item,ltPropView,ltPropNonWorkingDays,ltPropHolidayObject)}} "style="--lyte-timelineview-col-number : {{index+1}};" class="lyteTimelineViewOverlay " ></div>
                    <%}else if(ltPropView == 'month'){%>
                        <div lyte-for="{{headerArray}} as item index" class="lyteTimelineViewOverlay {{if(lyteUiTimelineGridOverlay(item,ltPropView,index),'lyteTimelineViewEvenSection','lyteTimelineViewOddSection')}}"   style="--lyte-timelineview-col-number : {{item.startColumn}}; grid-column-end: span {{item.endColumn}};"></div>
                    <%}else if(ltPropView == 'quarter'){%>
                        <lyte-timeline-view-overlay lyte-for="{{timeline}} as item index" class="lyteTimelineViewOverlay {{lyteUiTimelineViewMonthClass(item)}} " style="--lyte-timelineview-col-number : {{index+1}}; --lyte-timelineview-lineCount:{{lyteUiTimelineViewLineCount(item,true,this,ltPropView)}};  --lyte-timelineview-lineCountMinus:{{lyteUiTimelineViewLineCount(item,null,this,ltPropView)-1+'px'}}"></lyte-timeline-view-overlay>
                    <%}else if(ltPropView == 'week'){%>
                        <div lyte-for="{{headerArray}} as item index" class="lyteTimelineViewOverlay  {{if(lyteUiTimelineGridOverlay(item,ltPropView),'lyteTimelineViewEvenSection','lyteTimelineViewOddSection')}}"  style="--lyte-timelineview-col-number : {{item.startColumn}}; grid-column-end: span {{item.endColumn}}; "></div>
                    <%}%>
                </div>
                <%if(ltPropView === 'day'){%>
                    <div class="lyteTimelineViewBg" style="--lyte-timelineview-col-number: {{timeline.length}}"></div>
                <%}%>
                <div class="lyteTimelineViewArrowContainer" style="--lyte-timelineview-col-number: {{timeline.length}}">
                    <div lyte-for-in="{{populateObject}} as item index" class="lyteTimelineViewArrow lyteTimelineViewEventArrow"  style="grid-row: {{item.index}}" data-id="{{item.id}}" >
                        <div class="lyteTimelineViewArrowBox lyteTimelineViewLeftArrow lyteTimelineViewHideArrow" lt-prop-title="" onclick="{{action('onarrowclick',event,item,'left')}}" onmouseover="{{action('onArrowhover',event,item,this)}}"></div>
                        <div class="lyteTimelineViewArrowBox lyteTimelineViewRightArrow lyteTimelineViewHideArrow" lt-prop-title="" onclick="{{action('onarrowclick',event,item,'right')}}" onmouseover="{{action('onArrowhover',event,item,this)}}"></div>
                        <div class="lyteTimelineViewArrowSeparator"></div>
                        <div class="lyteTimelineViewArrowText lyteTimelineViewArrowTextHide lyteTextEllipsisNode" onclick="{{action('onTextclick',event,item)}}">
                            <%if(ltPropArrowkeyYield){%>
                                <lyte-yield yield-name="timeline-arrow-key" timeline-event="{{item}}" >
                                </lyte-yield>  
                            <%}else{%>
                                {{item[ltPropArrowKey]}}
                            <%}%>  
                        </div>
                    </div>
                    <div class="lyteTimelineViewHideLoadmore lyteTimelineViewLoading">
                        <%if(!ltPropLoaderYield){%>
                            <lyte-loader lt-prop-inline=true lt-prop-close-icon="false"  lt-prop-progress-bar='{"mode": "indefinite" , "show":false}' lt-prop-on-timeout='{"errorMsg":" "}'> </lyte-loader >
                        <%}else{%>
                            <lyte-yield yield-name="timeline-loader" class="lyteTimelineViewLoadingYield">
                            </lyte-yield> 
                        <%}%>
                    </div>
                </div>
                
            <%}else{%>
                <div class="lyteTimelineViewNoResultDiv" style="grid-column-start: 1; grid-column-end: {{timeline.length}};">
                    <div class="lyteTimelineViewNoResultLabel">{{ltPropNoRecordFound}}</div>
                </div>
            <%}%>
            <div class="lyteTimelineViewToday" >
                <div class="lyteTimelineViewTodayText">Today</div>
                <div class="lyteTimelineViewTodayLineDiv" >
                    <div class="lyteTimelineViewTodayLine">
                    </div>
                </div>
            </div>
        </div>
        <div class="lyteTimelineViewContentElem  {{lyteUiTimelineViewGetViewClass(ltPropView)}} " style="--lyte-timelineview-column-size: {{ltPropDateWidth[ltPropView]+'px'}}; --lyte-timelineview-column-gridline-temp: {{(ltPropDateWidth[ltPropView]+1) + 'px'}} ; --lyte-timelineview-groupby-panel-width:{{ltPropGroupbyPanelWidth}};" lyte-else>
            <div class="lyteTimelineViewHeaderRowWrap">
                <div class="lyteTimelineViewGroupbyElementHeaderWrap" style="--lyte-timelineview-col-number: {{timeline.length+1}};">
                    <div class="lyteTimelineViewGroupbyElementHeader">
                        <div>Grouped By</div>
                        <lyte-yield yield-name="timeline-groupBy" >
                        </lyte-yield>  
                    </div>
                    <div class="lyteTimeLineViewGroupbyDummyPanel">
                    </div>
                </div>
                <%if(ltPropView == 'quarter'){%>
                    <div class="lyteTimelineViewHeaderRow ">
                        <div lyte-for="{{subheader}} as item index" class="lyteTimelineYearHeaderElem quarterHeader" style="--lyte-timelineview-col-number: {{item.startColumn}}; grid-column-end: span {{item.endColumn}};" >
                            <span> 
                                {{item.year}}
                            </span> 
                        </div>
                    </div>
                <%}%>
                <div class="lyteTimelineViewHoverCardDiv lyteTimelineViewHoverCardHide">
                    <div class="lyteTimelineViewHoverCard">
                        <lyte-yield yield-name="hover-card" timeline-event="{{item}}" hover-data="{{ltPropHoverCardData}}">
                        </lyte-yield>  
                    </div>
                </div>
                <div class="lyteTimelineViewHeaderRow">
                    <div lyte-for="{{headerArray}} as item index" class="lyteTimelineViewPrimaryHeaderElem lyteTimelineViewHeaderMonthElem" style='--lyte-timelineview-col-number: {{item.startColumn}}; grid-column-end: span {{item.endColumn}}; ' onmouseenter="{{action('onDateHover',event,this,item)}}" onmouseleave="{{action('onDateMouseOut')}}">
                        <span class="lyteTimelineViewPeriodLabel">
                            <%if(ltPropView == 'week'){%>
                                {{item.week}}
                            <%}else if(ltPropView == 'quarter') {%>
                                <span class="lyteTimelineViewHeaderPrimaryLabel">{{item.quarter}}</span>
                                <span class="lyteTimelineViewYearLabel">{{item.year}}</span>
                            <%}else{%>
                                <span class="lyteTimelineViewHeaderPrimaryLabel lyteTimelineViewMonthLabel">{{lyteUiTimelineViewGetMonth(item.month,months)}}</span>
                                <span class="lyteTimelineViewYearLabel">{{item.year}}</span>
                            <%}%>
                        </span>
                    </div>
                </div>
                <div class="lyteTimelineViewHeaderRow">
                    <div lyte-for="{{timeline}} as item index" class="lyteTimelineViewSecondaryHeaderElem lyteTimelineViewHeaderElem  {{lyteUiTimelineViewFindWeekend(item,ltPropView,ltPropNonWorkingDays,ltPropHolidayObject)}} {{if(item.isendOfView,'lyteTimelineViewEndOfSection','')}}" style="--lyte-timelineview-col-number: {{index+1}};--lyte-timelineview-lineCount:{{lyteUiTimelineViewLineCount(item,null,this,ltPropView)}};"  data-date="{{lyteUiSchedulerGetDate(item)}}" id="{{lyteUiSchedulerGetDate(item)}}" onmouseenter="{{action('onDateHover',event,this,item)}}" onmouseleave="{{action('onDateMouseOut')}}" >
                        <span> 
                            <% if(ltPropView == 'quarter') {%>
                                {{lyteUiTimelineViewGetMonth(item,months)}}
                            <%}else{%>
                                {{lyteUiTimelineViewGetDay(item,ltPropView)}}
                            <%}%>
                        </span> 
                    </div>
                </div>
            </div>
            <div class="lyteTimelineViewGroupbyContainer" style="--lyte-timelineview-col-number: {{timeline.length+1}}">
                <%if(groupByData.length){%>
                    <template lyte-for="{{groupByData}} as groupByDataArray index" >
                        <lyte-timeline-view-accordion class="lyteTimelineViewGroupbyAccordion {{lyteUiTimelineViewAccordionClosed(groupByDataArray,this)}}  {{if(groupByDataArray.loadmore,'lyteTimelineViewHasMoreEvent',)}} {{if(lyteUiIfEquals(index,groupByData.length-1),'lyteTimelineViewLastAccordion','')}}" style="--lyte-timelineview-row-end: {{groupByDataArray.rowCount+1}}" group="{{groupByDataArray.systemValue}}"  id="{{groupByDataArray.systemValue}}">
                            <div class="lyteTimelineViewGroupbyElement" onclick="{{action('toggleAccordion',event,this,groupByDataArray)}}" >
                                <div class="lyteTimelineViewGroupbyElementLabelWrap">
                                    <lyte-text class="lyteTimelineViewGroupbyElementLabel" lt-prop-value="{{groupByDataArray.userValue}}"></lyte-text>
                                    <lyte-badge class="lyteTimelineViewGroupbyCount" lt-prop-data="{{groupByDataArray.eventCount}}" lt-prop-max-length="{{ltPropMaxEventCountLength}}" lt-prop-show-tooltip=true></lyte-badge>
                                    <span class="lyteTimelineViewGroupbyAccordionArrow"></span>
                                </div>
                                <div class="lyteTimelineViewGroupbyElementFillBg"></div>
                            </div>
                            <div class="lyteTimelineViewGroupbyAccordionBody {{if(groupByDataArray.norecordfound,'lyteTimelineViewNoRecordFound')}}"  style="--lyte-timelineview-row-end:{{groupByDataArray.rowCount}}">
                                <%if(groupByDataArray.children.length){%>
                                    <%if(ltPropView == 'quarter'){%>
                                        <div lyte-for="{{timeline}} as item index" class="lyteTimelineViewOverlay" style="--lyte-timelineview-col-number : {{index+1}}; --lyte-timelineview-lineCount:{{lyteUiTimelineViewLineCount(item,null,this,ltPropView)}};"></div>
                                    <%}%>
                                    <div class="lyteTimelineViewEventsContainer">
                                        <div lyte-for="{{groupByDataArray.children}} as item index" class="lyteTimelineViewEventDiv {{if(!item.end,'lyteTimeLineViewNoEnd','')}} " id="{{item.id}}"  style="--lyte-timelineview-row-number: {{index+1}};"  onmouseover="{{action('onEventHover',event,item,this)}}" onmouseleave="{{action('onEventOut',event,item,this)}}" onfocusin="{{action('onEventHover',event,item,this)}}">
                                            <div class="lyteTimelineViewEvent LyteTimelineViewGroupBy {{lyteUiTimelineViewAddClass(item.class,this)}}" style=" {{lyteUiTimelineViewColorCode(item.color_code,this)}}" >  
                                                <div class="lyteTimelineViewLeft lyteTimelineViewEventResizeHandler" onmousedown="{{action('onmousedownEvent',event,'left',this,item,groupByDataArray)}}" onkeydown="{{action('onkeydownEvent',event,'left',this,item,groupByDataArray)}}" onkeyup="{{action('onkeyupEvent',event,this,item,groupByDataArray)}}" lyte-if={{item.leftResize&&item.end}} ></div>
                                                <lyte-yield yield-name="timeline-event" timeline-event="{{item}}" >
                                                </lyte-yield>  
                                                <div  class='lyteTimeLineViewNoEndElem' lyte-if="{{!item.end}}"></div>
                                                <div class="lyteTimelineViewDue" lyte-if="{{item.dueDate}}">
                                                </div>
                                                <div class="lyteTimelineViewRight lyteTimelineViewEventResizeHandler" onmousedown="{{action('onmousedownEvent',event,'right',this,item,groupByDataArray)}}" onkeydown="{{action('onkeydownEvent',event,'right',this,item,groupByDataArray)}}" onkeyup="{{action('onkeyupEvent',event,this,item,groupByDataArray)}}"  lyte-if={{item.rightResize&&item.end}} lyte-if={{item.end}}></div>
                                            </div>
                                        </div> 
                                        <div class="lyteTimelineViewLoadMore" style="grid-column-start: 1; grid-column-end:{{timeline.length+1}}" lyte-if="{{groupByDataArray.loadmore}}" onclick="{{action('loadmore',event,groupByDataArray,this)}}">
                                            <div  class="lyteTimelineViewLoadMoreLabel"> View More</div>
                                        </div>
                                        <div class="lyteTimelineViewHideLoadmore lyteTimelineViewLoading" >
                                            <%if(!ltPropLoaderYield){%>
                                                <lyte-loader lt-prop-inline=true lt-prop-close-icon="false"  lt-prop-progress-bar='{"mode": "indefinite" , "show":false}' lt-prop-on-timeout='{"errorMsg":" "}'> </lyte-loader >
                                            <%}else{%>
                                                <lyte-yield yield-name="timeline-loader" class="lyteTimelineViewLoadingYield">
                                                </lyte-yield> 
                                            <%}%>
                                        </div>
                                        <div class="lyteTimelineViewArrowContainer">
                                            <div lyte-for="{{groupByDataArray.children}} as item index" class="lyteTimelineViewArrow lyteTimelineViewEventArrow" style="grid-row: {{item.index}}" data-id="{{item.id}}" >
                                                <div class="lyteTimelineViewArrowBox lyteTimelineViewLeftArrow lyteTimelineViewHideArrow" lt-prop-title="" onclick="{{action('onarrowclick',event,item,'left',groupByDataArray.systemValue)}}"  onmouseover="{{action('onArrowhover',event,item,this)}}"></div>
                                                <div class="lyteTimelineViewArrowBox lyteTimelineViewRightArrow lyteTimelineViewHideArrow" lt-prop-title="" onclick="{{action('onarrowclick',event,item,'right',groupByDataArray.systemValue)}}"  onmouseover="{{action('onArrowhover',event,item,this)}}"></div>
                                                <div class="lyteTimelineViewArrowSeparator"></div>
                                                <div class="lyteTimelineViewArrowText lyteTimelineViewArrowTextHide lyteTextEllipsisNode" onclick="{{action('onTextclick',event,item)}}">
                                                    <%if(ltPropArrowkeyYield){%>
                                                        <lyte-yield yield-name="timeline-arrow-key" timeline-event="{{item}}" >
                                                        </lyte-yield>  
                                                    <%}else{%>
                                                        {{item[ltPropArrowKey]}}
                                                    <%}%> 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <%}else if(groupByDataArray.norecordfound){%>
                                    <div class="lyteTimelineViewNoResultDiv" style="grid-column-start: 1; grid-column-end: {{timeline.length}};">
                                        <div class="lyteTimelineViewNoResultLabel">{{ltPropNoRecordFound}}</div>
                                    </div>
                                <%}%>
                            </div>
                        
                        </lyte-timeline-view-accordion>
                    </template>
                <%}else{%>
                    <div class="lyteTimelineViewNoResultDiv" style="grid-column-start: 1; grid-column-end: {{timeline.length}}; --lyte-timelineview-row-end: {{lyteUiTimelineViewRowCount(ltPropManipulatedEvent,ltPropMaxHeight)}};">
                        <div class="lyteTimelineViewNoResultLabel">{{ltPropNoRecordFound}}</div>
                    </div>
                <%}%>
            </div>
            <div class="lyteTimelineViewOverlayDiv">
                <%if(ltPropView == 'day'){%>
                    <div lyte-for="{{timeline}} as item index" lyte-if="{{lyteUiTimelineGridOverlay(item,ltPropView,ltPropNonWorkingDays,ltPropHolidayObject)}} "style="--lyte-timelineview-col-number : {{index+1}};" class="lyteTimelineViewOverlay " ></div>
                <%}else if(ltPropView == 'month'){%>
                    <div lyte-for="{{headerArray}} as item index" class="lyteTimelineViewOverlay {{if(lyteUiTimelineGridOverlay(item,ltPropView,index),'lyteTimelineViewEvenSection','lyteTimelineViewOddSection')}}"   style="--lyte-timelineview-col-number : {{item.startColumn}}; grid-column-end: span {{item.endColumn}};"></div>
                <%}else if(ltPropView == 'quarter'){%>
                    <lyte-timeline-view-overlay lyte-for="{{timeline}} as item index" class="lyteTimelineViewOverlay {{lyteUiTimelineViewMonthClass(item)}} " style="--lyte-timelineview-col-number : {{index+1}}; --lyte-timelineview-lineCount:{{lyteUiTimelineViewLineCount(item,true,this,ltPropView)}};  --lyte-timelineview-lineCountMinus:{{lyteUiTimelineViewLineCount(item,null,this,ltPropView)-1+'px'}}"></lyte-timeline-view-overlay>
                <%}else if(ltPropView == 'week'){%>
                    <div lyte-for="{{headerArray}} as item index" class="lyteTimelineViewOverlay  {{if(lyteUiTimelineGridOverlay(item,ltPropView),'lyteTimelineViewEvenSection','lyteTimelineViewOddSection')}}"  style="--lyte-timelineview-col-number : {{item.startColumn}}; grid-column-end: span {{item.endColumn}}; "></div>
                <%}%>
            </div>
            <%if(ltPropView === 'day'){%>
                <div class="lyteTimelineViewBg {{if(lyteUiIfEquals(index,groupByData.length-1),'lyteTimelineViewLastAccordion','')}}" style=" --lyte-timelineview-col-number: {{timeline.length+1}};"></div>
            <%}%>
            <div class="lyteTimelineViewToday" >
                <div class="lyteTimelineViewTodayText">Today</div>
                <div class="lyteTimelineViewTodayLineDiv" >
                    <div class="lyteTimelineViewTodayLine">
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>