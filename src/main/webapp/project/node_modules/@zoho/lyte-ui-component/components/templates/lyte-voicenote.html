<template tag-name="lyte-voicenote">
	<%if(renderPrefetch){%>
		<div class="lyteVoiceNotePrefetchContainer">
			<div class="lyteVoiceNotePrefetchPlayIcon" aria-label="{{ltPropAriaAttributes.prefetch}}" role = "button" tabindex="{{commonTabindex}}" onclick="{{action('prefetch')}}" onkeydown = "{{action('prefetchkey',event)}}">
				<div class="lyteCircleLoader">
					<span class="lyteCircleInnerLoader"></span>
				</div>
			</div>
			<div class="lyteVoiceNotePrefetchLoadBarWrap">
				<%if(ltPropLoadingMessage){%>
					<span class="lyteVoiceNotePrefetchMessage">{{ltPropLoadingMessage}}</span>
				<%}%>
				<span class="lyteVoiceNotePrefetchLoadingBar"></span>
			</div>
		</div>
	<%} else {%>
		<span role="button" tabindex="{{commonTabindex}}" aria-label="{{ltPropAriaAttributes.state}}" class="lyteVoiceNotePausePlayIcon {{state}}" onclick="{{action('toggle')}}" onkeydown="{{action('toggleKey',event)}}"></span>
		<audio onpause="{{action('pause')}}" onplay="{{action('play')}}" onvolumechange="{{action('changeVolume', event)}}" onloadedmetadata="{{action('meta', event)}}" ontimeupdate="{{action('update',event)}}" preload="{{ltPropPreload}}" onprogress="{{action('progress',this)}}">
			<%ltPropSrc.forEach( function( item, index ){%>
				<source onerror="{{action('error',event)}}" src={{item.src}} type='{{item.type||"audio/mpeg"}}' label = {{item.label}}>
			<%})%>
		</audio>
		<div role="progressbar" aria-label="{{ltPropAriaAttributes.progress}}" aria-valuemin = 0 aria-valuenow = {{elapsedTimeValue}} aria-valuemax = {{durationValue}} class="lyteVoiceNoteProgress" tabindex="{{ltPropTabindex}}" onkeydown="{{action('keydown',event)}}" onclick="{{action('progressClick', event)}}">
			<span class="lyteVoiceNoteCompletion"></span>
			<span class="lyteVoiceNotePreload" style="{{progressLoad}}"></span>
			<span class="lyteVoiceNoteHandler" lt-prop-tooltip-class = "lyteVoiceNoteTooltip" ontouchstart = "{{action('mousedown',event)}}" onmousedown="{{action('mousedown', event)}}" lt-prop-title = {{elapsedTime}} lt-prop-tooltip-config = '{"showdelay":500,"hidedelay" : 500, "position" : "bottom"}'></span>
		</div>
	<%}%>
	<time class="lyteVoiceNoteElapsedTime" datetime={{elapsedFormat}}>{{elapsedTime}}</time>
	<span  class="lyteVoiceNoteTimeSeparate" lyte-if="{{elapsedTime}}">/</span>
	<time class="lyteVoiceNoteDurationSpan" datetime={{datetimeFormat}}>{{duration}}</time>
	<%if(ltPropVolumeControl){ %>
		<div class="lyteVoiceNoteVolumeController">
			<span role="button" aria-label="{{ltPropAriaAttributes.volume}}" aria-haspopup="true" aria-expanded="{{if(popShow,'true','false')}}" disabled = {{renderPrefetch}} aria-disabled="{{renderPrefetch}}" tabindex="{{commonTabindex}}" class="lyteVoiceNoteVolumeControl {{randomClass}}{{if(muted,' lyteVoiceNoteMuteIcon','')}}{{fullVolume}}" onkeydown="{{action('togglePopKey',event)}}" onclick="{{action('togglePop')}}"></span>
			<lyte-popover lt-prop-scrollable="true" lt-prop = {{ltPropPopover}} lt-prop-show = {{lbind(popShow)}} lt-prop-origin-elem = ".{{randomClass}}" lt-prop-content-padding="">
				<template is = "registerYield" yield-name = "popover">
					<lyte-popover-content class = "lyteVoiceNotePopover">
						<div class="lyteVoiceNoteVolumeSlider">
							<span class="lyteVoiceNoteVolumeIcon{{if(muted,' lyteVoiceNoteMuteIcon','')}}{{fullVolume}}" onclick="{{action('onMute')}}"></span>
							<lyte-multislider lt-prop-rerender = {{lbind(reRender)}} lt-prop-aria = {{ltPropAria}} lt-prop-tabindex = {{ltPropAria?-1:ltPropTabindex}} lt-prop-max = '1' lt-prop-fill-color = '#ddd' lt-prop-height='2px' lt-prop-yield=true lt-prop-width='60px' lt-prop-handler='lyteCircle' lt-prop-value = '{{sliderData}}' on-change="{{method('setVolume')}}" lt-prop-color = '["#61A6E8" ]'></lyte-multislider>
						</div>
					</lyte-popover-content>
				</template>
			</lyte-popover>
		</div>		
	<%} if(ltPropPlaybackRate){%>
		<lyte-dropdown lt-prop = {{stringify(ltPropDropdown)}} lt-prop-disabled = {{renderPrefetch}} class = "lyteVoiceNotePlaybackRate" lt-prop-selected = {{lbind(ltPropPlaybackRate)}}>
			<template is = "registerYield" yield-name = "yield">
				<lyte-drop-box class="lyteVoiceNotePlaybackRateDropbox">
					<lyte-drop-body>
						<%ltPropPlaybackOptions.forEach( function( item ){%>
							<lyte-drop-item data-value = {{item.value}}>{{item.label}}</lyte-drop-item>
						<%})%>
					</lyte-drop-body>
				</lyte-drop-box>
			</template>
		</lyte-dropdown>
	<%}%>
</template>
