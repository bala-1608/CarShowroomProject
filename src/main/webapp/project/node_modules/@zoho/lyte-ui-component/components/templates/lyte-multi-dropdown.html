<template tag-name="lyte-multi-dropdown">
    <template lyte-if="{{ltPropSearch}}">
        <lyte-search lt-prop-component="dropdown" lt-prop-query-selector='{"scope":"#dropBody{{multiDropId}}", "search":"lyte-drop-item"}'></lyte-search>
    </template>
    
    <template lyte-if="{{ltPropType=='checkbox'}}">
        <lyte-dropdown
        lt-prop-options="{{ltPropData}}"
        lt-prop-disabled-list="{{ltPropDisabledList}}"
        lt-prop-disabled="{{ltPropDisabled}}"
        lt-prop-user-value="{{ltPropUserValue}}"
        lt-prop-system-value="{{ltPropSystemValue}}"
        lt-prop-selected-list="{{ltPropSelected}}"
        lt-prop-position="{{ltPropPosition}}"
        lt-prop-type="multiple"
        lt-prop-no-result=""
        lt-prop-prevent-parent-scroll="{{ltPropPreventParentScroll}}"
        lt-prop-label="{{ltPropLabel}}"
        lt-prop-label-class="{{ltPropLabelClass}}"
        lt-prop-direction="{{ltPropDirection}}"
        on-remove="{{method('closeButtonClicked')}}"
        on-before-add="{{method('defaultBeforeAdd')}}"
        on-add="{{method('defaultAdd')}}"
        on-option-selected="{{method('onOptionSelected')}}"
        on-show="{{method('onShow')}}"
        on-before-show="{{method('onBeforeShow')}}"
        on-hide="{{method('onHide')}}"
        on-before-hide="{{method('onBeforeHide')}}"
        on-position-changed="{{method('onPositionChanged')}}"
        before-select="{{method('beforeSelect')}}"
        on-change="{{method('onChange')}}"
        on-after-render="{{method('onAfterRender')}}"
        on-scroll="{{method('onScroll')}}"
        on-search="{{method('onSearch')}}">
            <template  is="registerYield" yield-name="yield">
                <lyte-yield lyte-if="{{ltPropYield}}" yield-name="yield"></lyte-yield>
                <lyte-drop-button lyte-else id="{{multiDropId}}">
                    <span lyte-if="{{showPlace}}" class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span>
                    <div lyte-else class="lyteMultiDropSelectedText" >
                        <template lyte-if="{{ltPropTag}}">
                            <ul class="lyteMultipleSelect">
                                <template lyte-for="{{dropButtonArray}} as item index">
                                    <li data-value="{{item[ltPropSystemValue]}}">
                                        <span class="lyteDropdownVisible" lt-prop-title="" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;,&quot;appearance&quot;:&quot;box&quot;,&quot;margin&quot;:5,&quot;keeptooltip&quot;:true}" lt-prop-tooltip-class="" mouseenter="lyte-dropdown => toolTipConfig">
                                            <lyte-yield lyte-if="{{ltPropLiYield}}" item="{{item}}" item-name="{{item[ltPropUserValue]}}" item-value="{{item[ltPropSystemValue]}}" yield-name="lyteMultiDropButtonLi"></lyte-yield>
                                            <lyte-text lyte-else lt-prop-value = "{{item[ltPropUserValue]}}" lt-prop-tooltip-config = '{ "position" : "bottom" }'> </lyte-text>
                                        </span>
                                        <lyte-drop-remove tabindex="0" data-value="{{item[ltPropSystemValue]}}" class="lyteCloseIcon"></lyte-drop-remove>
                                    </li>
                                </template>
                                <template lyte-if="{{hoverList.length}}">
                                    <li class="lyteMultiDropdownNmoreElem" id="{{lyteUiGetMultiDropNMoreId()}}" tabindex="0" onfocus="{{action('moreTagFocused',event)}}" lyte-hovercard=true >
                                        + {{hoverList.length}} More
                                    </li>
                                </template>
                            </ul>
                        </template>
                        <template lyte-else>
                            <lyte-text lyte-if="{{ltPropShowCount}}" lt-prop-array = '{{multiTextArray}}'   lt-prop-hovercard='{"placement":"right","class": "{{ltPropHovercardClass}}"}'   lt-prop-suffix = " and &lt;span class ='prefixClass'&gt;{0} others&lt;/span&gt;" lt-prop-min-count = 1></lyte-text>
                            <template lyte-else>
                                {{multiText}}
                            </template>
                        </template>
                    </div>
                </lyte-drop-button>

                <lyte-drop-box lyte-if="{{ltPropDataYield}}" onclick="{{action('multiRemoveItem')}}" class="lyteMultiDropdownCheckBoxTypeDropbox">
                    <lyte-yield yield-name="lytedropheaderyield"></lyte-yield>
                    <lyte-drop-body id="dropBody{{multiDropId}}">
                        <%ltPropData.forEach(function(item,index){
                            if(lyteUiOptGroupCheck(item)){%>
                                <lyte-drop-group>
                                    <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label>
                                    <%lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item)).forEach(function(subItem,indexval){%>
                                        <lyte-drop-item  data-value="{{subItem[ltPropSystemValue]}}" >
                                            <lyte-checkbox lt-prop-tabindex="-1" lt-prop-label="{{subItem[ltPropUserValue]}}" ></lyte-checkbox>
                                        </lyte-drop-item>
                                    <%})%>
                                </lyte-drop-group>
                            <%}else{%>
                                <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" >
                                    <lyte-checkbox lt-prop-tabindex="-1" lt-prop-label="{{item[ltPropUserValue]}}"  lt-prop-yield="true">
                                        <template is="registerYield" yield-name="yield">
                                            <lyte-yield  yield-name="lytedropboxyield" drop-item="{{item}}"></lyte-yield>
                                        </template>
                                    </lyte-checkbox>
                                </lyte-drop-item>
                            <%}})%>
                    </lyte-drop-body>
                </lyte-drop-box>
                <lyte-drop-box lyte-else onclick="{{action('multiRemoveItem')}}" class="lyteMultiDropdownCheckBoxTypeDropbox">
                    <lyte-yield yield-name="lytedropheaderyield"></lyte-yield>
                    <lyte-drop-body id="dropBody{{multiDropId}}">
                        <%ltPropData.forEach(function(item,index){
                            if(lyteUiOptGroupCheck(item)){%>
                                <lyte-drop-group>
                                    <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label>
                                    <%lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item)).forEach(function(subItem,indexval){%>
                                        <lyte-drop-item  data-value="{{subItem[ltPropSystemValue]}}" >
                                            <lyte-checkbox lt-prop-tabindex="-1" lt-prop-label="{{subItem[ltPropUserValue]}}"  ></lyte-checkbox>
                                        </lyte-drop-item>
                                    <%})%>
                                </lyte-drop-group>
                            <%}else{%>
                                <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" >
                                    <lyte-checkbox lt-prop-tabindex="-1" lt-prop-label="{{item[ltPropUserValue]}}"  ></lyte-checkbox>
                                </lyte-drop-item>
                            <%}})%>
                    </lyte-drop-body>
                </lyte-drop-box>
            </template>
        </lyte-dropdown>

            <!-- For N more Tag -->
            <lyte-hovercard 
            lyte-if="{{!ltPropYield && nMoreTagShown}}"
           lt-prop-popover-wrapper-class="lyteMultiDropdownTagHovercard"  
           lt-prop-origin-elem='#{{lyteUiGetMultiDropNMoreId()}}' 
           lt-prop-max-width="250px" 
           lt-prop-auto-show="true" 
           lt-prop-placement="bottom top" 
           lt-prop-id = 'lyteHoverCardFor{{multiDropId}}' 
           on-before-hovercard-show="{{method('onBeforeNtagShow')}}" 
           on-hovercard-before-hide="{{method('onNtagHoverHidden')}}"
       >
       <template is = "registerYield" yield-name = "hoverCardYield">
           <lyte-hovercard-content class="lyteMultiDropdownHovercardContent">
           <template lyte-if="{{ltPropMoreOptionsTagView}}">
               <ul class="lyteMultipleSelect">
               <template lyte-for="{{hoverList}} as item index">
                   <li data-value="{{item[ltPropSystemValue]}}">
                   <span class="lyteDropdownVisible" lt-prop-title="" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;,&quot;appearance&quot;:&quot;box&quot;,&quot;margin&quot;:5,&quot;keeptooltip&quot;:true}" lt-prop-tooltip-class="" mouseenter="lyte-dropdown => toolTipConfig">
                       <lyte-yield lyte-if="{{ltPropLiYield}}" item="{{item}}" item-name="{{item[ltPropUserValue]}}" item-value="{{item[ltPropSystemValue]}}" yield-name="lyteMultiDropButtonLi"></lyte-yield>
                       <lyte-text lyte-else lt-prop-value = "{{item[ltPropUserValue]}}" lt-prop-tooltip-config = '{ "position" : "bottom" }'> </lyte-text>
                   </span>
                   <lyte-multi-drop-remove tabindex="0" data-value="{{item[ltPropSystemValue]}}" lt-prop-origin-elem="#{{multiDropId}}" class="lyteCloseIcon"></lyte-multi-drop-remove>
                   </li>
               </template>
               </ul>
           </template>
           <template lyte-else>
               <template lyte-for="{{hoverList}} as item index">
               <lyte-text lt-prop-value = "{{item[ltPropUserValue]}}" lt-prop-tooltip-config = '{ "position" : "bottom" }'> </lyte-text> 
               <br/> 
               </template>
           </template>
           </lyte-hovercard-content>
       </template>
            </lyte-hovercard>

            <lyte-hovercard 
            lyte-if="{{!ltPropYield && !ltPropTag && !ltPropShowCount && !ltPropHideHovercard}}"
            lt-prop-class = {{ltPropHovercardClass}}
            lt-prop-origin-elem=' #{{multiDropId}}' 
            lt-prop-max-width="250px" 
            lt-prop-auto-show="true" 
            lt-prop-placement="right"
        >
            <template is = "registerYield" yield-name = "hoverCardYield">
                <lyte-hovercard-content class="lyteMultiDropdownHovercardContent">
                    {{unescape(multiTextForHovercard)}}
                </lyte-hovercard-content>
            </template>
            </lyte-hovercard>

    </template>
    <!-- If not checkbox -->
    <template lyte-else>
        <lyte-dropdown
        lt-prop-type="multiple"
        lt-prop-options="{{ltPropData}}"
        lt-prop-disabled="{{ltPropDisabled}}"
        lt-prop-disabled-list="{{ltPropDisabledList}}"
        lt-prop-user-value="{{ltPropUserValue}}"
        lt-prop-system-value="{{ltPropSystemValue}}"
        lt-prop-selected-list="{{ltPropSelected}}"
        lt-prop-position="{{ltPropPosition}}"
        lt-prop-no-result=""
        lt-prop-tabindex="-1"
        lt-prop-prevent-parent-scroll="{{ltPropPreventParentScroll}}"
        lt-prop-label="{{ltPropLabel}}"
        lt-prop-label-class="{{ltPropLabelClass}}"
        lt-prop-direction="{{ltPropDirection}}"
        on-before-add="{{method('multiBeforeAdd')}}"
        on-add="{{method('multiAdd')}}"
        on-remove="{{method('closeButtonClicked')}}"
        on-option-selected="{{method('onOptionSelected')}}"
        on-show="{{method('onShow')}}"
        on-before-show="{{method('onBeforeShow')}}"
        on-hide="{{method('onHide')}}"
        on-before-hide="{{method('onBeforeHide')}}"
        on-position-changed="{{method('onPositionChanged')}}"
        before-select="{{method('beforeSelect')}}"
        on-change="{{method('onChange')}}"
        on-after-render="{{method('onAfterRender')}}"
        on-scroll="{{method('onScroll')}}"
        on-search="{{method('onSearch')}}">
            <template  is="registerYield" yield-name="yield">
                <lyte-yield lyte-if="{{ltPropYield}}" yield-name="yield"></lyte-yield>
                <lyte-drop-button lyte-else id="{{multiDropId}}">
                    <span lyte-if="{{showPlace}}" class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span>
                    <div lyte-else class="lyteMultiDropSelectedText" >
                        <template lyte-if="{{ltPropTag}}">
                            <ul class="lyteMultipleSelect">
                                <template lyte-for="{{dropButtonArray}} as item index">
                                    <li data-value="{{item[ltPropSystemValue]}}">
                                        <span class="lyteDropdownVisible" lt-prop-title="" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;,&quot;appearance&quot;:&quot;box&quot;,&quot;margin&quot;:5,&quot;keeptooltip&quot;:true}" lt-prop-tooltip-class="" mouseenter="lyte-dropdown => toolTipConfig">
                                            <lyte-yield lyte-if="{{ltPropLiYield}}" item="{{item}}" item-name="{{item[ltPropUserValue]}}" item-value="{{item[ltPropSystemValue]}}" yield-name="lyteMultiDropButtonLi"></lyte-yield>
                                            <lyte-text lyte-else lt-prop-value = "{{item[ltPropUserValue]}}" lt-prop-tooltip-config = '{ "position" : "bottom" }'> </lyte-text>
                                        </span>
                                        <lyte-drop-remove tabindex="0" data-value="{{item[ltPropSystemValue]}}" class="lyteCloseIcon"></lyte-drop-remove>
                                    </li>
                                </template>
                                <template lyte-if="{{hoverList.length}}">
                                    <li class="lyteMultiDropdownNmoreElem" id="{{lyteUiGetMultiDropNMoreId()}}" tabindex="0" onfocus="{{action('moreTagFocused',event)}}" lyte-hovercard=true>
                                        + {{hoverList.length}} More
                                    </li>
                                </template>
                            </ul>
                        </template>
                        <template lyte-else>
                            <!-- show count true -->
                            <lyte-text  lyte-if="{{ltPropShowCount}}" lt-prop-array = '{{multiTextArray}}'   lt-prop-hovercard='{"placement":"right","class": "{{ltPropHovercardClass}}"}'   lt-prop-suffix = " and &lt;span class ='prefixClass'&gt;{0} others&lt;/span&gt;" lt-prop-min-count = 1>
                            </lyte-text>
                            <!-- show count false -->
                            <template lyte-else>
                                {{multiText}}
                            </template>
                        </template>
                    </div>
                    <!-- <button lyte-if="{{ltPropClear}}" onclick="{{action('clearAll')}}">c</button> -->
                </lyte-drop-button>
               
                <!-- When drop Box is need -->
                <lyte-drop-box lyte-if="{{ltPropDataYield}}" onclick="{{action('multiRemoveItem')}}" class="lyteMultiDropdownDropbox" >
                    <lyte-yield yield-name="lytedropheaderyield"></lyte-yield>                   
                    <lyte-drop-body id="dropBody{{multiDropId}}">
                        <%ltPropData.forEach(function(item,index){
                        if(lyteUiOptGroupCheck(item)){%>
                            <lyte-drop-group>
                                <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label>
                                <%lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item)).forEach(function(subItem,indexval){%>
                                    <lyte-drop-item data-value="{{subItem[ltPropSystemValue]}}">{{subItem[ltPropUserValue]}}</lyte-drop-item>
                                <%})%>
                            </lyte-drop-group>
                        <%}else{%>
                            <lyte-drop-item  data-value="{{item[ltPropSystemValue]}}">
                                  <!-- {{item[ltPropUserValue]}} -->
                                    <lyte-yield  yield-name="lytedropboxyield" drop-item="{{item}}"></lyte-yield>
                            </lyte-drop-item>
                        <%}})%>
                    </lyte-drop-body>
                </lyte-drop-box>
                <lyte-drop-box lyte-else onclick="{{action('multiRemoveItem')}}" class="lyteMultiDropdownDropbox" >
                    <lyte-yield yield-name="lytedropheaderyield"></lyte-yield>           
                    <lyte-drop-body id="dropBody{{multiDropId}}">
                        <%ltPropData.forEach(function(item,index){
                        if(lyteUiOptGroupCheck(item)){%>
                            <lyte-drop-group>
                                <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label>
                                <%lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item)).forEach(function(subItem,indexval){%>
                                    <lyte-drop-item data-value="{{subItem[ltPropSystemValue]}}">{{subItem[ltPropUserValue]}}</lyte-drop-item>
                                <%})%>
                            </lyte-drop-group>
                        <%}else{%>
                            <lyte-drop-item  data-value="{{item[ltPropSystemValue]}}">
                                  {{item[ltPropUserValue]}}
                            </lyte-drop-item>
                        <%}})%>
                    </lyte-drop-body>
                </lyte-drop-box>
            </template>
        </lyte-dropdown>

            <!-- For N more tag -->
            <lyte-hovercard 
            lyte-if="{{!ltPropYield && nMoreTagShown}}"
            lt-prop-popover-wrapper-class="lyteMultiDropdownTagHovercard" 
            lt-prop-origin-elem='#{{lyteUiGetMultiDropNMoreId()}}' 
            lt-prop-auto-show="true" 
            lt-prop-placement="bottom top" 
            lt-prop-max-width="250px" 
            lt-prop-id = 'lyteHoverCardFor{{multiDropId}}' 
            on-before-hovercard-show="{{method('onBeforeNtagShow')}}" 
            on-hovercard-before-hide="{{method('onNtagHoverHidden')}}"
        >
            <template is = "registerYield" yield-name = "hoverCardYield">
                <lyte-hovercard-content class="lyteMultiDropdownHovercardContent">
                <template lyte-if="{{ltPropMoreOptionsTagView}}">
                    <ul class="lyteMultipleSelect">
                    <template lyte-for="{{hoverList}} as item index">
                        <li data-value="{{item[ltPropSystemValue]}}">
                        <span class="lyteDropdownVisible" lt-prop-title="" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;,&quot;appearance&quot;:&quot;box&quot;,&quot;margin&quot;:5,&quot;keeptooltip&quot;:true}" lt-prop-tooltip-class="" mouseenter="lyte-dropdown => toolTipConfig">
                            <lyte-yield lyte-if="{{ltPropLiYield}}" item="{{item}}" item-name="{{item[ltPropUserValue]}}" item-value="{{item[ltPropSystemValue]}}" yield-name="lyteMultiDropButtonLi"></lyte-yield>
                            <lyte-text lyte-else lt-prop-value = "{{item[ltPropUserValue]}}" lt-prop-tooltip-config = '{ "position" : "bottom" }'> </lyte-text>  
                        </span>
                        <lyte-multi-drop-remove tabindex="0" data-value="{{item[ltPropSystemValue]}}" lt-prop-origin-elem="#{{multiDropId}}" class="lyteCloseIcon"></lyte-multi-drop-remove>
                        </li>
                    </template>
                    </ul>
                </template>
                <template lyte-else>
                    <template lyte-for="{{hoverList}} as item index">
                    <lyte-text lt-prop-value = "{{item[ltPropUserValue]}}" lt-prop-tooltip-config = '{ "position" : "bottom" }'> </lyte-text> 
                    <br/> 
                    </template>
                </template>
                </lyte-hovercard-content>
            </template>
            </lyte-hovercard>

            <lyte-hovercard 
                lyte-if="{{!ltPropYield && !ltPropTag && !ltPropShowCount && !ltPropHideHovercard}}"
                lt-prop-class = "{{ltPropHovercardClass}}"
                lt-prop-origin-elem='#{{multiDropId}}' 
                lt-prop-max-width="250px" 
                lt-prop-auto-show="true" 
                lt-prop-placement="right"
            >
                <template is = "registerYield" yield-name = "hoverCardYield">
                    <lyte-hovercard-content class="lyteMultiDropdownHovercardContent">
                        {{unescape(multiTextForHovercard)}}
                    </lyte-hovercard-content>
                </template>
            </lyte-hovercard>
    </template>
</template>