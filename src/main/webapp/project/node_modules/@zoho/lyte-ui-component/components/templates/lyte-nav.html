<template tag-name="lyte-nav">
	<% if( ltPropAlignment !== 'vertical' ) {%>
		<% if(ltPropNavYield){ %>
			<lyte-yield yield-name="nav" items={{auxArray}} role="list"></lyte-yield>
			<div lyte-if={{ltPropBentoIcon}} class="lyteNavBento {{ltPropBentoIconClass}}" onclick="{{action('handleBentoClick',this)}}" onmouseover="{{action('handleBentoHover',this)}}">
				<div class="lyteNavCandyboxIcon"></div>
				<div class="lyteNavCandyboxZIcon">
					<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
						<g>
							<path class="lyteNavCandyboxZIconPath1" d="M50,50l1.8-4.5l3.5-8.6c1.3-3.3-1.1-6.9-4.6-6.9H9c-3.6,0-6-3.7-4.6-6.9l6.8-16C12,5.2,13.8,4,15.8,4h51.9
								c14.1,0,23.7,14.2,18.6,27.2l-8.7,22.3"/>
							<path class="lyteNavCandyboxZIconPath2" d="M22.4,46.4l-8.7,22.3C8.6,81.8,18.2,96,32.3,96h51.9c2,0,3.8-1.2,4.6-3.1l6.8-16c1.4-3.3-1-6.9-4.6-6.9H49.4
								c-3.5,0-6-3.6-4.6-6.9l3.7-9.3L50,50"/>
						</g>
					</svg>
				</div>
			</div>
		<% } else { %>
			<% auxArray.forEach(function(item,index){ %>
				<% if(item[ltPropSubMenuValue] && item.type === 'menu'){%>
					<lyte-nav-item data-value={{item[ltPropSystemValue]}} id="{{'lyteitem' + item['header_value']}}" lyte-shortcut="{{lyteUiGetValue(item,'shortcut')}}">
						<% if(item[ltPropUserValue]){%>
							{{item[ltPropUserValue]}}
						<%}else{%>
							{{item["header"]}}
						<%}%>
						<% if(item[ltPropSystemValue]){%>
							<lyte-nav-menu-icon tabindex="0" id="lyteicon{{item[ltPropSystemValue]}}" lt-prop-parent="{{item['header_value']}}"></lyte-nav-menu-icon>
						<%}else{%>
							<lyte-nav-menu-icon tabindex="0" id="lyteicon{{item['header_value']}}" lt-prop-parent="{{item['header_value']}}"></lyte-nav-menu-icon>
						<%}%>
					</lyte-nav-item>
				<%}else{%>
					<lyte-nav-item data-value={{item[ltPropSystemValue]}} id="{{'lyteitem' + item[ltPropSystemValue]}}" lyte-shortcut="{{lyteUiGetValue(item,'shortcut')}}">
						{{item[ltPropUserValue]}}
					</lyte-nav-item>
				<%}%>
			<% }) %>
			<div lyte-if={{ltPropBentoIcon}} class="lyteNavBento {{ltPropBentoIconClass}}" onclick="{{action('handleBentoClick',this)}}" onmouseover="{{action('handleBentoHover',this)}}">
				<div class="lyteNavCandyboxIcon"></div>
				<div class="lyteNavCandyboxZIcon">
					<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
						<g>
							<path class="lyteNavCandyboxZIconPath1" d="M50,50l1.8-4.5l3.5-8.6c1.3-3.3-1.1-6.9-4.6-6.9H9c-3.6,0-6-3.7-4.6-6.9l6.8-16C12,5.2,13.8,4,15.8,4h51.9
								c14.1,0,23.7,14.2,18.6,27.2l-8.7,22.3"/>
							<path class="lyteNavCandyboxZIconPath2" d="M22.4,46.4l-8.7,22.3C8.6,81.8,18.2,96,32.3,96h51.9c2,0,3.8-1.2,4.6-3.1l6.8-16c1.4-3.3-1-6.9-4.6-6.9H49.4
								c-3.5,0-6-3.6-4.6-6.9l3.7-9.3L50,50"/>
						</g>
					</svg>
				</div>
			</div>
		<% } %>
		

		<% if(ltPropType === 'collapse' ){ %>
			<% if(menuContent.length > 0 || showMenu){%>
				<span onkeydown="{{action('openMenu',event)}}" class={{ltPropContainerClass}} id={{ltPropContainerId}} role="button" aria-expanded="false" aria-labelledby={{randomId}} tabindex="0">
					<span class={{ltPropMenuIcon}}></span>
				</span>
				<span id={{randomId}} class="lyteVisuallyHidden" aria-hidden="true">
					{{lyteUiI18n('lyte.nav.more.options')}}
				</span>
			<% } %>
			<!-- More options menu -->
			<lyte-menu
			on-menu-click="{{method('moreOptionsItemSelected')}}"
				lt-prop={{stringify(ltPropMenu)}}
				on-before-open="{{method('beforeOpen')}}"
				on-open="{{method('open')}}"
				on-before-close="{{method('beforeClose')}}"
				on-close="{{method('close')}}"
				before-render="{{method('befRender')}}"
				after-render="{{method('aftRender')}}"
				>
				<template is="registerYield" yield-name="yield">
					<% if(ltPropMenuYield){ %>
						<lyte-yield yield-name="menu" items={{menuContent}}></lyte-yield>
					<% } else { %>
						<lyte-menu-body class={{ltPropNavMenuClass}}>
							<% menuContent.forEach(function(item,index){ %>
								<!-- the change is brought here! -->
								<%if(!item[ltPropSubMenuValue]){%>
									<lyte-menu-item data-value={{item[ltPropSystemValue]}} class="{{if( index == 2 , 'testItem' , '' )}}" tabindex="0" lyte-shortcut="{{lyteUiGetValue(item,'shortcut')}}">
                            			<lyte-menu-label>{{item[ltPropUserValue]}} </lyte-menu-label>
                            			<lyte-menu-description>{{item[ltPropSystemValue]}} </lyte-menu-description>
                        			</lyte-menu-item>
								<%}else{%>
									<lyte-menu-item data-value = {{item[ltPropSystemValue]}} class="lyteMenuAccordionContainer lyteMenuAccordionClosed" tabindex="0" lyte-shortcut="{{lyteUiGetValue(item,'shortcut')}}">
										<lyte-menu-label>{{item["header"]}}</lyte-menu-label>
										<div class="lyteMenuAccordionItem">
											<%item[ltPropSubMenuValue].forEach( function(item){%>
												<lyte-menu-item data-value = {{item[ltPropSystemValue]}} tabindex="0">
													<lyte-menu-label>{{item[ltPropUserValue]}}</lyte-menu-label>
													<lyte-menu-description>{{item[ltPropSystemValue]}} </lyte-menu-description>
												</lyte-menu-item>
											<%})%>
										</div>
									</lyte-menu-item>
								<%}%>
							<% }) %>
						</lyte-menu-body>
					<% } %>
				</template>
			</lyte-menu>
		<% } %>

	<% } else { %>
		<% if( ltPropType === "collapse" ) { %>
			<% if(ltPropNavYield){ %>
				<lyte-yield yield-name="nav" items={{auxArray}} role="list"></lyte-yield>
			<% } else { %>
				<% auxArray.forEach(function(item,index){ %>
					<lyte-nav-item tabindex="0" data-value={{item[ltPropSystemValue]}} id="item{{item[ltPropSystemValue]}}" lyte-shortcut="{{lyteUiGetValue(item,'shortcut')}}">{{item[ltPropUserValue]}}</lyte-nav-item>
				<% }) %>
			<% } %>
			<% if(menuContent.length > 0 || showMenu){%>
				<span class={{ltPropContainerClass}} id={{ltPropContainerId}} role="button" aria-expanded="false" aria-labelledby={{randomId}} tabindex="0">
					<span class={{ltPropMenuIcon}}></span>
				</span>
				<span id={{randomId}} class="lyteVisuallyHidden" aria-hidden="true">
					{{lyteUiI18n('lyte.nav.more.options')}}
				</span>
			<% } %>
			<lyte-menu
				lt-prop={{stringify(ltPropMenu)}}

				lt-prop-position="right"
				on-menu-click="{{method('moreOptionsItemSelected')}}"
				on-before-open="{{method('beforeOpen')}}"
				on-open="{{method('open')}}"
				on-before-close="{{method('beforeClose')}}"
				on-close="{{method('close')}}"
				before-render="{{method('befRender')}}"
				after-render="{{method('aftRender')}}">
				<template is="registerYield" yield-name="yield">
					<% if(ltPropMenuYield){ %>
						<lyte-yield yield-name="menu" items={{menuContent}}></lyte-yield>
					<% } else { %>
						<lyte-menu-body class={{ltPropNavMenuClass}}>
							<% menuContent.forEach(function(item,index){ %>
								<lyte-menu-item data-value={{item[ltPropSystemValue]}} lyte-shortcut="{{lyteUiGetValue(item,'shortcut')}}">
									<lyte-menu-label>
										{{item[ltPropUserValue]}}
									</lyte-menu-label>
								</lyte-menu-item>
							<% }) %>
						</lyte-menu-body>
					<% } %>
				</template>
			</lyte-menu>
		<% }
		else { %>
			<% if( ltPropNavYield ) { %>
				<% if( ltPropArrow ) { %>
					<lyte-arrow style="display: inline-block;">
						<i class="arrow-up"></i>
					</lyte-arrow>
				<% } %>
				<lyte-yield class="lyteNavDiv" yield-name="nav"></lyte-yield>
				<% if( ltPropArrow ) { %>
					<lyte-arrow style="display: inline-block;">
						<i class="arrow-down"></i>
					</lyte-arrow>
				<% }
			} %>
		<% } %>
	<% } %>
   <lyte-menu  id="lyteNavItemSubMenu"
   lt-prop-yield="true"
   lt-prop-event = 'click'
   lt-prop-system-value = "{{ltPropSystemValue}}"
   lt-prop-user-value = "{{ltPropUserValue}}"
   lt-prop-query="{{navMenuQuery}}"
   lt-prop-position="down"

   on-menu-click="{{method('menuItemOfNavMenuClicked')}}"
   on-before-open="{{method('beforeSubMenuOpen')}}"
   on-open="{{method('subMenuOpened')}}"
   on-close="{{method('subMenuClosed')}}"
   >
		<template is="registerYield" yield-name="yield">
			<lyte-menu-body>
			<% if(ltPropNavMenuYield){ %>
				<lyte-yield yield-name="navmenu" navobj={{navMenu}} selectedNavItem ={{selectedNavItem}} selectedMenuItem={{selectedMenuItem}}></lyte-yield>
			<% } else { %>
				<lyte-menu-group>
					<% navMenu[ltPropSubMenuValue].forEach(function(subitem,index){ %>
						<lyte-menu-item data-value={{subitem[ltPropSystemValue]}} id="item{{subitem[ltPropSystemValue]}}" tabindex="0">
							<lyte-menu-label>{{subitem[ltPropUserValue]}}</lyte-menu-label>
							<lyte-menu-description>{{subitem[ltPropSystemValue]}}</lyte-menu-description>
						</lyte-menu-item>
					<% }) %>
				</lyte-menu-group>
			<% } %>
			</lyte-menu-body>
		</template>
    </lyte-menu>
</template>
