Lyte.Component.register("lyte-boolean-filter", {
	init : function(){
		var __data = this.data;
		__data.isSearch = Object.keys( __data.ltPropOptions ).length >= __data.ltPropSearchCount;
		this.setData( 'ltPropCondition', { isValid : false, isNeg : false, value : "", label : "", type : "boolean" } );
	},

	condn_obs : function( arg ){
		this.setData( 'selected', arg.newValue.value || "" );
	}.observes( 'ltPropCondition' ),

	data : function(){
		var __string = "string",
		__array = "array",
		__object = "object",
		__boolean = "boolean",
		__number = 'number';

		return {
			ltPropCondition : Lyte.attr( __object ),
			ltPropPlaceholder : Lyte.attr( __string, { default : _lyteUiUtils.i18n( 'none', "listview.filter", "None" ) } ),
			ltPropOptions : Lyte.attr( __object, { default : {
					is : _lyteUiUtils.i18n( "selected", void 0, "Selected" ),
					is_not : _lyteUiUtils.i18n( "not.selected", "listview.filter", "Not selected" )
				} 
			} ),

			ltPropNoMatch : Lyte.attr( __string, { default : _lyteUiUtils.i18n( 'no.results.found', void 0, 'No Results Found' ) } ),

			ltPropSearchCount : Lyte.attr( __number, { default : 8 } ),

			ltPropReset : Lyte.attr( __boolean, { default : false } ),

			selected : Lyte.attr( __string, { default : "" } ),
			noResult : Lyte.attr( __boolean ),

			isSearch : Lyte.attr( __boolean )
		}		
	},

	reset_obs : function( arg ){
		if( arg.newValue ){
			this.setData( arg.item, false );
			this.setData( 'selected', "" );
		}
	}.observes( 'ltPropReset' ),

	selected_obs : function( arg ){
		var selected = arg.newValue,
		__data = this.data,
		condition = __data.ltPropTempCondition,
		Lc = Lyte.objectUtils,
		ns = "lyteTextFilter_";

		$L( this.$node ).addClass( ns + selected ).removeClass( ns + arg.oldValue );

		Lc( condition, 'add', 'isNeg', selected == "is_not" );
		Lc( condition, 'add', 'isValid', !!selected );
		Lc( condition, 'add', 'value', selected );
		Lc( condition, 'add', 'label', __data.ltPropOptions[ selected ] || "" );
		Lc( condition, 'add', 'class', condition.isValid ? 'lyteListFilterSelected' : '' );

	}.observes( 'selected' ),

	methods : {
		search : function( arg ){
			this.setData( 'noResult', arg.length == 0 );
		}
	}
});
